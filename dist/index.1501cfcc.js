!function(){function t(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},r=e.parcelRequire9b86;function s(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function o(t,e){return e.get?e.get.call(t):e.value}function l(t,e){return o(t,s(t,e,"get"))}function a(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(t,e,i){a(t,e),e.set(t,i)}function c(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}function u(t,e,i){return c(t,s(t,e,"set"),i),i}function d(t,e){if(e.set)return"__destrWrapper"in e||(e.__destrWrapper={set value(i){e.set.call(t,i)},get value(){return e.get.call(t)}}),e.__destrWrapper;if(!e.writable)throw new TypeError("attempted to set read only private field");return e}function g(t,e){return d(t,s(t,e,"update"))}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}null==r&&((r=function(t){if(t in i)return i[t].exports;if(t in n){var e=n[t];delete n[t];var r={id:t,exports:{}};return i[t]=r,e.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},e.parcelRequire9b86=r),r.register("iE7OH",(function(e,i){var n,r;t(e.exports,"register",(function(){return n}),(function(t){return n=t})),t(e.exports,"resolve",(function(){return r}),(function(t){return r=t}));var s={};n=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)s[e[i]]=t[e[i]]},r=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),r.register("aNJCr",(function(e,i){var n;t(e.exports,"getBundleURL",(function(){return n}),(function(t){return n=t}));var r={};function s(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(t){var e=r[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(t)return s(t[2])}return"/"}(),r[t]=e),e}})),r("iE7OH").register(JSON.parse('{"eEdY6":"index.1501cfcc.js","a4CoT":"still.5b1c1644.png","lKJyW":"walking_1.b14e8473.png","eZDWB":"walking_2.f3764bc3.png","3Kdr6":"walking_3.478d9ba0.png","dwTvu":"walking_4.f3764bc3.png","dms9V":"jumping.05ea4910.png","kre8w":"ground.ae3be667.png"}'));const w=30;var p;p=r("aNJCr").getBundleURL("eEdY6")+r("iE7OH").resolve("a4CoT");var y;y=r("aNJCr").getBundleURL("eEdY6")+r("iE7OH").resolve("lKJyW");var v;v=r("aNJCr").getBundleURL("eEdY6")+r("iE7OH").resolve("eZDWB");var x;x=r("aNJCr").getBundleURL("eEdY6")+r("iE7OH").resolve("3Kdr6");var m;m=r("aNJCr").getBundleURL("eEdY6")+r("iE7OH").resolve("dwTvu");var b;b=r("aNJCr").getBundleURL("eEdY6")+r("iE7OH").resolve("dms9V");var R;R=r("aNJCr").getBundleURL("eEdY6")+r("iE7OH").resolve("kre8w");const L={still:new URL(p),walking:[new URL(y),new URL(v),new URL(x),new URL(m)],jumping:new URL(b),ground:new URL(R)};let E,_,k;function z(t){return new Promise(((e,i)=>{const n=new Image;n.onerror=i,n.onload=()=>e(n),n.src=t.toString()}))}let H,A=0;var U;(U=H||(H={}))[U.Left=0]="Left",U[U.Right=1]="Right";class M{add(t){return new M(this.x+t.x,this.y+t.y)}mul(t){return new M(this.x*t,this.y*t)}abs(){return new M(Math.abs(this.x),Math.abs(this.y))}constructor(t,e){this.x=t,this.y=e}}class O{get topLeft(){return this.r}get bottomRight(){return this.r.add(this.size)}get center(){return this.r.add(this.size.mul(.5))}collidesWith(t){return this.bottomRight.x>=t.topLeft.x&&this.topLeft.x<=t.bottomRight.x&&this.bottomRight.y>=t.topLeft.y&&this.topLeft.y<=t.bottomRight.y}overlapWith(t){const e=new M(1/0,1/0);return this.topLeft.x<t.topLeft.x?e.x=this.bottomRight.x-t.topLeft.x:this.bottomRight.x>t.bottomRight.x&&(e.x=t.bottomRight.x-this.topLeft.x),this.topLeft.y<t.topLeft.y?e.y=this.bottomRight.y-t.topLeft.y:this.bottomRight.y>t.bottomRight.y&&(e.y=t.bottomRight.y-this.topLeft.y),e.x=Math.min(e.x,this.size.x,t.size.x),e.y=Math.min(e.y,this.size.y,t.size.y),e}constructor(t,e,i,n){this.r=new M(t,e),this.size=new M(i,n)}}class S extends O{paint(t){for(let e=0;e<this.size.x/w;e++)for(let i=0;i<this.size.y/w;i++)t.drawImage(E.ground,this.r.x+e*w,this.r.y+i*w,w,w)}constructor(t,e,i,n){super(t,e,i,n)}}var j=new WeakMap,C=new WeakMap;class B extends O{update(t){this.walking===H.Left?this.v.x=-40:this.walking===H.Right&&(this.v.x=40);const e=this.v.x>0?1:-1;0!==this.v.x&&this.collision.ground&&!this.walking&&(this.v.x-=4*e),this.v.x<0||this.walking===H.Left?this.direction=H.Left:(this.v.x>0||this.walking===H.Right)&&(this.direction=H.Right),this.collision.ground||(this.v.y+=-40*t),this.v.y<-120&&(this.v.y=-120),this.r=this.r.add(this.v.mul(t));const i=this.r.y+this.size.y-A-.6*_.height;i>0&&(A+=i,k.translate(0,-i));const n=this.r.y-A-_.height/5;n<0&&(A+=n,k.translate(0,-n))}paint(t){if(t.save(),t.translate(this.center.x,this.center.y),t.scale(this.direction===H.Left?-1:1,-1),t.translate(-this.center.x,-this.center.y),this.collision.ground)if(!this.walking||this.collision.wall_left||this.collision.wall_right){const e=E.still;t.drawImage(e,this.r.x,this.r.y,this.size.x,this.size.y)}else{const e=E.walking[l(this,j)];t.drawImage(e,this.r.x,this.r.y,e.width/E.still.width*this.size.x,this.size.y),g(this,C).value++,u(this,C,l(this,C)%8),0===l(this,C)&&(g(this,j).value++,u(this,j,l(this,j)%E.walking.length))}else{const e=E.jumping,i=e.width/E.still.width*this.size.x,n=e.height/E.still.height*this.size.y,r=i-this.size.x;t.drawImage(e,this.r.x-r/2,this.r.y,i,n)}t.restore()}jump(){this.jumps<3&&(this.jumps++,this.v.y=120)}constructor(t,e,i){super(t,e,E.still.width/E.still.height*i,i),f(this,"v",new M(0,0)),f(this,"collision",{ground:!1,ceiling:!1,wall_left:!1,wall_right:!1}),f(this,"jumps",0),h(this,j,{writable:!0,value:0}),h(this,C,{writable:!0,value:0})}}let W;const J=[new S(0,0,800,w)];let T,F,I=J.slice();function N(t){var e,i,n,r;t=decodeURI(t),T=function(t){let e=1779033703,i=3144134277,n=1013904242,r=2773480762;for(let s,o=0;o<t.length;o++)s=t.charCodeAt(o),e=i^Math.imul(e^s,597399067),i=n^Math.imul(i^s,2869860233),n=r^Math.imul(n^s,951274213),r=e^Math.imul(r^s,2716044179);return e=Math.imul(n^e>>>18,597399067),i=Math.imul(r^i>>>22,2869860233),n=Math.imul(e^n>>>17,951274213),r=Math.imul(i^r>>>19,2716044179),[(e^i^n^r)>>>0,(i^e)>>>0,(n^e)>>>0,(r^e)>>>0]}(t),e=T[0],i=T[1],n=T[2],r=T[3],F=function(){var t=(e>>>=0)+(i>>>=0)|0;return e=i^i>>>9,i=(n>>>=0)+(n<<3)|0,n=(n=n<<21|n>>>11)+(t=t+(r=1+(r>>>=0)|0)|0)|0,(t>>>0)/4294967296},_&&P(!0);const s=document.getElementById("seed");s&&(s.value=t),window.location.hash=`#${t}`,document.title=t}window.addEventListener("load",(async function(){if(E=await async function(t){const e=[];let i={ground:void 0,jumping:void 0,walking:[],still:void 0};for(const n of Object.keys(t))if(Array.isArray(t[n]))for(let r=0;r<t[n].length;r++)e.push(z(t[n][r]).then((t=>i[n][r]=t)));else e.push(z(t[n]).then((t=>i[n]=t)));return await Promise.all(e),i}(L),W=new B(250,200,70),_=document.getElementById("canvas"),!_)return void console.error("failed to get canvas element");if(k=_.getContext("2d"),!k)return void console.error("failed to get canvas context");X();const t=document.getElementById("seed");t?(t.addEventListener("input",(t=>N(t.target.value))),window.addEventListener("hashchange",(()=>N(window.location.hash.substring(1)))),N(window.location.hash.substring(1)||"Jixxklääs"),document.addEventListener("keydown",V),document.addEventListener("keyup",V),window.requestAnimationFrame(Y)):console.error("failed to get seed input element")}));let K=0;function Y(t){if(window.requestAnimationFrame(Y),!t)return;const e=(t-K)/100;K=t,_&&k?(k.clearRect(0,A,_.width,_.height),W.update(e),function(){W.collision={ground:!1,ceiling:!1,wall_left:!1,wall_right:!1};for(const t of I)if(W.collidesWith(t)){const e=W.overlapWith(t).abs();e.y<e.x?(W.center.y>t.center.y?(W.r.y=t.r.y+t.size.y,W.collision.ground=!0):(W.r.y=t.r.y-W.size.y,W.collision.ceiling=!0),W.v.y=0):(W.center.x>t.center.x?(W.r.x=t.r.x+t.size.x,W.collision.wall_left=!0):(W.r.x=t.r.x-W.size.x,W.collision.wall_right=!0),W.v.x=0)}W.r.x<=0?(W.r.x=0,W.collision.wall_left=!0):W.r.x+W.size.x>=_.width&&(W.r.x=_.width-W.size.x,W.collision.wall_right=!0)}(),W.paint(k),I.forEach((t=>t.paint(k))),function(){const t=Math.floor(W.r.y/250);W.collision.ground?(W.jumps=0,G=t,G>Q&&(Q=G,localStorage.setItem("highscore",Q.toString()))):t<G&&(G=t);k.textAlign="left",k.fillStyle="white",Z(`Score: ${G}\nHighscore: ${Q}`,20,20)}(),P()):console.error("canvas or context are falsy")}let D=0;function P(t=!1){for(t&&(D=0,I=J.slice());D-W.r.y<2*_.height;){const t=Math.round((100+100*F())/w)*w,e=w,i=(_.width-t)*F(),n=D+250;D=n,I.push(new S(i,n,t,e))}}let $=!1,q=!1;function V(t){if("keydown"===t.type)switch(t.code){case"Space":W.jump();break;case"KeyA":case"ArrowLeft":$=!0,W.walking=H.Left;break;case"KeyD":case"ArrowRight":q=!0,W.walking=H.Right}else if("keyup"===t.type)switch(t.code){case"KeyA":case"ArrowLeft":$=!1,W.walking=q?H.Right:null;break;case"KeyD":case"ArrowRight":q=!1,W.walking=$?H.Left:null}}function Z(t,e,i){k.save(),k.translate(0,_.height+A),k.scale(1,-1);const n=t.split("\n");for(let t=0;t<n.length;t++)k.font="20px 'Press Start 2P'",k.fillText(n[t],e,i+20+30*t);k.restore()}let G=0,Q=localStorage.getItem("highscore")||0;function X(){if(!_)return;const{width:t,height:e}=_.parentElement.getBoundingClientRect();_.height=e,_.width=t,k.scale(1,-1),k.translate(0,-_.height-A)}window.addEventListener("resize",X)}();
//# sourceMappingURL=index.1501cfcc.js.map
