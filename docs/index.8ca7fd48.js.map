{"mappings":"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","sources":["node_modules/@swc/helpers/src/_class_extract_field_descriptor.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_get.mjs","node_modules/@swc/helpers/src/_class_private_field_get.mjs","node_modules/@swc/helpers/src/_check_private_redeclaration.mjs","node_modules/@swc/helpers/src/_class_private_field_init.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_set.mjs","node_modules/@swc/helpers/src/_class_private_field_set.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_update.mjs","node_modules/@swc/helpers/src/_class_private_field_update.mjs","node_modules/@swc/helpers/src/_define_property.mjs","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-26c1496cefad4176.js","node_modules/@parcel/runtime-js/lib/runtime-13cb91c576a2fe43.js","node_modules/@parcel/runtime-js/lib/runtime-4766e80fdc2ac16e.js","node_modules/@parcel/runtime-js/lib/runtime-96dda06808b5e542.js","node_modules/@parcel/runtime-js/lib/runtime-b8d6bfc0559bb096.js","node_modules/@parcel/runtime-js/lib/runtime-d16467b7716461d1.js","node_modules/@parcel/runtime-js/lib/runtime-e5c72e2a3d5ecd17.js","node_modules/@parcel/runtime-js/lib/runtime-38fc600795d25235.js","src/index.ts"],"sourcesContent":["export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\n","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorGet from './_class_apply_descriptor_get.mjs';\n\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}\n","export default function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration.mjs\";\n\nexport default function _classPrivateFieldInit(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\n","export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      // This should only throw in strict mode, but class bodies are\n      // always strict and private fields can only be used inside\n      // class bodies.\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorSet from './_class_apply_descriptor_set.mjs';\n\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}\n","export default function _classApplyDescriptorUpdate(receiver, descriptor) {\n    if (descriptor.set) {\n        if (!(\"__destrWrapper\" in descriptor)) {\n            descriptor.__destrWrapper = {\n                set value(v) {\n                    descriptor.set.call(receiver, v);\n                },\n                get value() {\n                    return descriptor.get.call(receiver);\n                },\n            };\n        }\n        return descriptor.__destrWrapper;\n    } else {\n        if (!descriptor.writable) {\n            // This should only throw in strict mode, but class bodies are\n            // always strict and private fields can only be used inside\n            // class bodies.\n            throw new TypeError(\"attempted to set read only private field\");\n        }\n        return descriptor;\n    }\n}\n","import classExtractFieldDescriptor from \"./_class_extract_field_descriptor.mjs\";\nimport classApplyDescriptorUpdate from \"./_class_apply_descriptor_update.mjs\";\n\nexport default function _classPrivateFieldUpdate(receiver, privateMap) {\n    var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"update\");\n    return classApplyDescriptorUpdate(receiver, descriptor);\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"ahxzu\\\":\\\"index.8ca7fd48.js\\\",\\\"el5my\\\":\\\"still.5b1c1644.png\\\",\\\"cT35h\\\":\\\"walking_1.b14e8473.png\\\",\\\"2407k\\\":\\\"walking_2.f3764bc3.png\\\",\\\"iY52g\\\":\\\"walking_3.478d9ba0.png\\\",\\\"kHvmh\\\":\\\"walking_4.f3764bc3.png\\\",\\\"cwiu1\\\":\\\"jumping.05ea4910.png\\\",\\\"3aTrs\\\":\\\"ground.ae3be667.png\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"el5my\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"cT35h\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2407k\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"iY52g\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"kHvmh\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"cwiu1\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3aTrs\")).toString();","const DEFAULT_SEED = \"Jixxklääs\";\n\nconst JUMPS = 3;\nconst GRAVITY = -40;\nconst GROUND_FRICTION = 4;\nconst WALK_VELOCITY = 40;\nconst JUMP_VELOCITY = 120;\nconst MAX_FALL_VELOCITY = -120;\n\nconst PLATFORM_TILE_SIZE = 30;\nconst PLATFORM_DISTANCE = 250;\nconst MAX_VIEWPORT_WIDTH = 800;\n\nlet _SHOW_DEBUG_INFO = false;\nconst _FONT_SIZE = 20;\n\ninterface SpriteCollection<T> {\n  still: T;\n  walking: T[];\n  jumping: T;\n  ground: T;\n}\n\nconst SPRITE_SOURCES: SpriteCollection<URL> = {\n  still: new URL(\"sprite/still.png\", import.meta.url),\n  walking: [\n    new URL(\"sprite/walking_1.png\", import.meta.url),\n    new URL(\"sprite/walking_2.png\", import.meta.url),\n    new URL(\"sprite/walking_3.png\", import.meta.url),\n    new URL(\"sprite/walking_4.png\", import.meta.url),\n  ],\n  jumping: new URL(\"sprite/jumping.png\", import.meta.url),\n  ground: new URL(\"sprite/ground.png\", import.meta.url),\n};\nlet SPRITES: SpriteCollection<HTMLImageElement>;\n\nfunction loadImage(url: URL | string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    image.onerror = reject;\n    image.onload = () => resolve(image);\n    image.src = url.toString();\n  });\n}\n\nasync function loadSprites(sources: SpriteCollection<URL>) {\n  // Load all sprites\n  const promises = [];\n  let sprites: SpriteCollection<HTMLImageElement> = {\n    ground: undefined,\n    jumping: undefined,\n    walking: [],\n    still: undefined,\n  };\n  for (const key of Object.keys(sources)) {\n    if (Array.isArray(sources[key])) {\n      for (let i = 0; i < sources[key].length; i++) {\n        promises.push(\n          loadImage(sources[key][i]).then((image) => (sprites[key][i] = image))\n        );\n      }\n    } else {\n      promises.push(\n        loadImage(sources[key]).then((image) => (sprites[key] = image))\n      );\n    }\n  }\n  await Promise.all(promises);\n  return sprites;\n}\n\nlet canvas: HTMLCanvasElement;\nlet context: CanvasRenderingContext2D;\nlet scrollPosition = 0;\n\nenum Direction {\n  Left,\n  Right,\n}\n\ninterface Collision {\n  ground: boolean;\n  ceiling: boolean;\n  wall_left: boolean;\n  wall_right: boolean;\n}\n\nclass Vec2 {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(other: Vec2) {\n    return new Vec2(this.x + other.x, this.y + other.y);\n  }\n\n  mul(factor: number) {\n    return new Vec2(this.x * factor, this.y * factor);\n  }\n\n  abs() {\n    return new Vec2(Math.abs(this.x), Math.abs(this.y));\n  }\n}\n\nclass GameObject {\n  r: Vec2;\n  size: Vec2;\n\n  constructor(x: number, y: number, w: number, h: number) {\n    this.r = new Vec2(x, y);\n    this.size = new Vec2(w, h);\n  }\n\n  get topLeft() {\n    return this.r;\n  }\n\n  get bottomRight() {\n    return this.r.add(this.size);\n  }\n\n  get center() {\n    return this.r.add(this.size.mul(0.5));\n  }\n\n  collidesWith(other: GameObject) {\n    return (\n      this.bottomRight.x >= other.topLeft.x &&\n      this.topLeft.x <= other.bottomRight.x &&\n      this.bottomRight.y >= other.topLeft.y &&\n      this.topLeft.y <= other.bottomRight.y\n    );\n  }\n\n  overlapWith(other: GameObject) {\n    const overlap = new Vec2(Infinity, Infinity);\n\n    if (this.topLeft.x < other.topLeft.x) {\n      overlap.x = this.bottomRight.x - other.topLeft.x;\n    } else if (this.bottomRight.x > other.bottomRight.x) {\n      overlap.x = other.bottomRight.x - this.topLeft.x;\n    }\n    if (this.topLeft.y < other.topLeft.y) {\n      overlap.y = this.bottomRight.y - other.topLeft.y;\n    } else if (this.bottomRight.y > other.bottomRight.y) {\n      overlap.y = other.bottomRight.y - this.topLeft.y;\n    }\n\n    overlap.x = Math.min(overlap.x, this.size.x, other.size.x);\n    overlap.y = Math.min(overlap.y, this.size.y, other.size.y);\n\n    return overlap;\n  }\n}\n\nclass Platform extends GameObject {\n  constructor(x: number, y: number, w: number, h: number) {\n    super(x, y, w, h);\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    for (let col = 0; col < this.size.x / PLATFORM_TILE_SIZE; col++) {\n      for (let row = 0; row < this.size.y / PLATFORM_TILE_SIZE; row++) {\n        context.drawImage(\n          SPRITES.ground,\n          this.r.x + col * PLATFORM_TILE_SIZE,\n          this.r.y + row * PLATFORM_TILE_SIZE,\n          PLATFORM_TILE_SIZE,\n          PLATFORM_TILE_SIZE\n        );\n      }\n    }\n\n    if (_SHOW_DEBUG_INFO) {\n      context.strokeStyle = \"red\";\n      context.strokeRect(this.r.x, this.r.y, this.size.x, this.size.y);\n    }\n  }\n}\n\nclass Player extends GameObject {\n  v = new Vec2(0, 0);\n  collision: Collision = {\n    ground: false,\n    ceiling: false,\n    wall_left: false,\n    wall_right: false,\n  };\n  walking: Direction;\n  direction: Direction;\n  jumps = 0;\n\n  #walkingAnimationState = 0;\n  #walkingAnimationCounter = 0;\n\n  constructor(x: number, y: number, h: number) {\n    const aspectRatio = SPRITES.still.width / SPRITES.still.height;\n    super(x, y, aspectRatio * h, h);\n  }\n\n  update(dt: number) {\n    if (this.walking === Direction.Left) {\n      this.v.x = -WALK_VELOCITY;\n    } else if (this.walking === Direction.Right) {\n      this.v.x = WALK_VELOCITY;\n    }\n\n    // Slow down when on ground\n    const sign = this.v.x > 0 ? 1 : -1;\n    if (this.v.x !== 0 && this.collision.ground && !this.walking) {\n      this.v.x -= sign * GROUND_FRICTION;\n    }\n\n    // Update facing direction\n    if (this.v.x < 0 || this.walking === Direction.Left) {\n      this.direction = Direction.Left;\n    } else if (this.v.x > 0 || this.walking === Direction.Right) {\n      this.direction = Direction.Right;\n    }\n\n    // Apply gravity if not standing on the ground\n    if (!this.collision.ground) {\n      this.v.y += GRAVITY * dt;\n    }\n\n    // Constrain to maximum velocity\n    if (this.v.y < MAX_FALL_VELOCITY) {\n      this.v.y = MAX_FALL_VELOCITY;\n    }\n\n    this.r = this.r.add(this.v.mul(dt));\n\n    const topDistance =\n      this.r.y + this.size.y - scrollPosition - (3 / 5) * canvas.height;\n    if (topDistance > 0) {\n      // Move viewport up\n      scrollPosition += topDistance;\n      context.translate(0, -topDistance);\n    }\n    const bottomDistance = this.r.y - scrollPosition - canvas.height / 5;\n    if (bottomDistance < 0) {\n      // Move viewport down\n      scrollPosition += bottomDistance;\n      context.translate(0, -bottomDistance);\n    }\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    if (_SHOW_DEBUG_INFO) {\n      context.strokeStyle = \"blue\";\n      context.strokeRect(this.r.x, this.r.y, this.size.x, this.size.y);\n    }\n\n    context.save();\n    context.translate(this.center.x, this.center.y);\n    context.scale(this.direction === Direction.Left ? -1 : 1, -1);\n    context.translate(-this.center.x, -this.center.y);\n\n    if (this.collision.ground) {\n      if (\n        this.walking &&\n        !this.collision.wall_left &&\n        !this.collision.wall_right\n      ) {\n        const sprite = SPRITES.walking[this.#walkingAnimationState];\n        context.drawImage(\n          sprite,\n          this.r.x,\n          this.r.y,\n          (sprite.width / SPRITES.still.width) * this.size.x,\n          this.size.y\n        );\n\n        // Advance walking animation\n        this.#walkingAnimationCounter++;\n        this.#walkingAnimationCounter %= 8;\n        if (this.#walkingAnimationCounter === 0) {\n          this.#walkingAnimationState++;\n          this.#walkingAnimationState %= SPRITES.walking.length;\n        }\n      } else {\n        const sprite = SPRITES.still;\n        context.drawImage(sprite, this.r.x, this.r.y, this.size.x, this.size.y);\n      }\n    } else {\n      const sprite = SPRITES.jumping;\n      const scaledWidth = (sprite.width / SPRITES.still.width) * this.size.x;\n      const scaledHeight = (sprite.height / SPRITES.still.height) * this.size.y;\n      const dw = scaledWidth - this.size.x;\n      context.drawImage(\n        sprite,\n        this.r.x - dw / 2,\n        this.r.y,\n        scaledWidth,\n        scaledHeight\n      );\n    }\n\n    context.restore();\n  }\n\n  jump() {\n    if (this.jumps < JUMPS) {\n      this.jumps++;\n      this.v.y = JUMP_VELOCITY;\n    }\n  }\n}\n\nlet player: Player;\nconst STATIC_PLATFORMS = [\n  // ground\n  new Platform(0, 0, MAX_VIEWPORT_WIDTH, PLATFORM_TILE_SIZE),\n];\nlet platforms = STATIC_PLATFORMS.slice();\n\n// See https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript\n// Hash function for strings\nfunction cyrb128(str: string) {\n  let h1 = 1779033703,\n    h2 = 3144134277,\n    h3 = 1013904242,\n    h4 = 2773480762;\n  for (let i = 0, k: number; i < str.length; i++) {\n    k = str.charCodeAt(i);\n    h1 = h2 ^ Math.imul(h1 ^ k, 597399067);\n    h2 = h3 ^ Math.imul(h2 ^ k, 2869860233);\n    h3 = h4 ^ Math.imul(h3 ^ k, 951274213);\n    h4 = h1 ^ Math.imul(h4 ^ k, 2716044179);\n  }\n  h1 = Math.imul(h3 ^ (h1 >>> 18), 597399067);\n  h2 = Math.imul(h4 ^ (h2 >>> 22), 2869860233);\n  h3 = Math.imul(h1 ^ (h3 >>> 17), 951274213);\n  h4 = Math.imul(h2 ^ (h4 >>> 19), 2716044179);\n  return [\n    (h1 ^ h2 ^ h3 ^ h4) >>> 0,\n    (h2 ^ h1) >>> 0,\n    (h3 ^ h1) >>> 0,\n    (h4 ^ h1) >>> 0,\n  ];\n}\n\n// Returns a random number generator for the given seed\nfunction sfc32(a: number, b: number, c: number, d: number) {\n  return function () {\n    a >>>= 0;\n    b >>>= 0;\n    c >>>= 0;\n    d >>>= 0;\n    var t = (a + b) | 0;\n    a = b ^ (b >>> 9);\n    b = (c + (c << 3)) | 0;\n    c = (c << 21) | (c >>> 11);\n    d = (d + 1) | 0;\n    t = (t + d) | 0;\n    c = (c + t) | 0;\n    return (t >>> 0) / 4294967296;\n  };\n}\n\nlet seed: number[], rand: () => number;\nfunction setSeed(it: string) {\n  it = decodeURI(it);\n\n  seed = cyrb128(it);\n  rand = sfc32(seed[0], seed[1], seed[2], seed[3]);\n\n  if (canvas) {\n    generatePlatforms(true);\n  }\n\n  const seedElement: HTMLInputElement = document.getElementById(\n    \"seed\"\n  ) as HTMLInputElement;\n  if (seedElement) {\n    seedElement.value = it;\n  }\n  window.location.hash = `#${it}`;\n  document.title = it;\n}\n\nasync function main() {\n  SPRITES = await loadSprites(SPRITE_SOURCES);\n\n  player = new Player(250, 200, 70);\n\n  canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n  if (!canvas) {\n    console.error(\"failed to get canvas element\");\n    return;\n  }\n  context = canvas.getContext(\"2d\");\n  if (!context) {\n    console.error(\"failed to get canvas context\");\n    return;\n  }\n\n  resizeCanvas();\n\n  const seedInput = document.getElementById(\"seed\");\n  if (!seedInput) {\n    console.error(\"failed to get seed input element\");\n    return;\n  }\n  // Update the seed when the input changes\n  seedInput.addEventListener(\"input\", (event) =>\n    setSeed((event.target as HTMLInputElement).value)\n  );\n  // Update the seed when the url changes\n  window.addEventListener(\"hashchange\", () =>\n    setSeed(window.location.hash.substring(1))\n  );\n  // Load the seed from the url\n  setSeed(window.location.hash.substring(1) || DEFAULT_SEED);\n\n  document.addEventListener(\"keydown\", inputSystem);\n  document.addEventListener(\"keyup\", inputSystem);\n\n  window.requestAnimationFrame(loop);\n}\nwindow.addEventListener(\"load\", main);\n\nlet fpsUpdateCounter = 0;\nlet fps: string;\nlet lastTime = 0;\nfunction loop(time: number) {\n  window.requestAnimationFrame(loop);\n  // Skip first frame\n  if (!time) {\n    return;\n  }\n\n  const dt = (time - lastTime) / 1e2;\n  lastTime = time;\n\n  if (!canvas || !context) {\n    console.error(\"canvas or context are falsy\");\n    return;\n  }\n\n  context.clearRect(0, scrollPosition, canvas.width, canvas.height);\n\n  if (_SHOW_DEBUG_INFO) {\n    // Do not update the fps every frame so it does not flicker\n    if (fpsUpdateCounter === 0) {\n      fps = (10 / dt).toFixed(1);\n    }\n    fpsUpdateCounter++;\n    fpsUpdateCounter %= 10;\n\n    context.fillStyle = \"lightgreen\";\n    context.textAlign = \"right\";\n    drawText(\n      `${fps}\n      ${player.jumps}`,\n      canvas.width - 20,\n      20\n    );\n  }\n\n  player.update(dt);\n\n  collisionSystem();\n\n  player.paint(context);\n  platforms.forEach((platform) => platform.paint(context));\n\n  displayScore();\n\n  generatePlatforms();\n}\n\n// Generates new platforms until there are enough to fill the screen\nlet generatedUntil = 0;\nfunction generatePlatforms(reset = false) {\n  if (reset) {\n    generatedUntil = 0;\n    platforms = STATIC_PLATFORMS.slice();\n  }\n\n  while (generatedUntil - player.r.y < 2 * canvas.height) {\n    const w =\n      Math.round((100 + rand() * 100) / PLATFORM_TILE_SIZE) *\n      PLATFORM_TILE_SIZE;\n    const h = PLATFORM_TILE_SIZE;\n    const x = (canvas.width - w) * rand();\n    const y = generatedUntil + PLATFORM_DISTANCE;\n    generatedUntil = y;\n    platforms.push(new Platform(x, y, w, h));\n  }\n}\n\nlet leftPressed = false;\nlet rightPressed = false;\nfunction inputSystem(event: KeyboardEvent) {\n  if (event.type === \"keydown\") {\n    switch (event.code) {\n      case \"Space\":\n        player.jump();\n        break;\n      case \"KeyA\":\n      case \"ArrowLeft\":\n        leftPressed = true;\n        player.walking = Direction.Left;\n        break;\n      case \"KeyD\":\n      case \"ArrowRight\":\n        rightPressed = true;\n        player.walking = Direction.Right;\n        break;\n    }\n  } else if (event.type === \"keyup\") {\n    switch (event.code) {\n      case \"KeyA\":\n      case \"ArrowLeft\":\n        leftPressed = false;\n        player.walking = !rightPressed ? null : Direction.Right;\n        break;\n      case \"KeyD\":\n      case \"ArrowRight\":\n        rightPressed = false;\n        player.walking = !leftPressed ? null : Direction.Left;\n        break;\n    }\n  }\n}\n\nfunction collisionSystem() {\n  player.collision = {\n    ground: false,\n    ceiling: false,\n    wall_left: false,\n    wall_right: false,\n  };\n  for (const platform of platforms) {\n    if (player.collidesWith(platform)) {\n      const overlap = player.overlapWith(platform).abs();\n      if (overlap.y < overlap.x) {\n        if (player.center.y > platform.center.y) {\n          // Place player's top edge at platform's bottom edge\n          player.r.y = platform.r.y + platform.size.y;\n          player.collision.ground = true;\n        } else {\n          // Place player's bottom edge at platform's top edge\n          player.r.y = platform.r.y - player.size.y;\n          player.collision.ceiling = true;\n        }\n        player.v.y = 0;\n      } else {\n        if (player.center.x > platform.center.x) {\n          // Place player's left edge at platform's right edge\n          player.r.x = platform.r.x + platform.size.x;\n          player.collision.wall_left = true;\n        } else {\n          // Place player's right edge at platform's left edge\n          player.r.x = platform.r.x - player.size.x;\n          player.collision.wall_right = true;\n        }\n        player.v.x = 0;\n      }\n    }\n  }\n\n  // Stop the player at the left or right edge of the screen\n  if (player.r.x <= 0) {\n    player.r.x = 0;\n    player.collision.wall_left = true;\n  } else if (player.r.x + player.size.x >= canvas.width) {\n    player.r.x = canvas.width - player.size.x;\n    player.collision.wall_right = true;\n  }\n}\n\nfunction drawText(text: string, x: number, y: number) {\n  context.save();\n  context.translate(0, canvas.height + scrollPosition);\n  context.scale(1, -1);\n\n  const lines = text.split(\"\\n\");\n  for (let i = 0; i < lines.length; i++) {\n    context.font = `${_FONT_SIZE}px 'Press Start 2P'`;\n    context.fillText(lines[i], x, y + _FONT_SIZE + (_FONT_SIZE + 10) * i);\n  }\n  context.restore();\n}\n\nlet score = 0;\nlet highscore = localStorage.getItem(\"highscore\") || 0;\nfunction displayScore() {\n  const currentScore = Math.floor(player.r.y / PLATFORM_DISTANCE);\n  if (player.collision.ground) {\n    player.jumps = 0;\n    score = currentScore;\n    if (score > highscore) {\n      highscore = score;\n      localStorage.setItem(\"highscore\", highscore.toString());\n    }\n  } else if (currentScore < score) {\n    score = currentScore;\n  }\n\n  context.textAlign = \"left\";\n  context.fillStyle = \"white\";\n  drawText(`Score: ${score}\\nHighscore: ${highscore}`, 20, 20);\n}\n\nfunction resizeCanvas() {\n  if (!canvas) {\n    return;\n  }\n\n  const { width, height } = canvas.parentElement.getBoundingClientRect();\n  canvas.height = height;\n  canvas.width = width;\n\n  // Place coordinate system origin in bottom left corner\n  context.scale(1, -1);\n  context.translate(0, -canvas.height - scrollPosition);\n}\nwindow.addEventListener(\"resize\", resizeCanvas);\n\n// vim: foldmethod=syntax\n"],"names":["$63a2a9cb56255ced$export$2e2bcd8739ae039","receiver","privateMap","action","has","TypeError","get","$91f06d233fb295cb$export$2e2bcd8739ae039","descriptor","call","value","$cfafd7bd727718cb$export$2e2bcd8739ae039","$3b30310a11d769ec$export$2e2bcd8739ae039","obj","privateCollection","$a33675d45e16a910$export$2e2bcd8739ae039","set","$613067712a285d8d$export$2e2bcd8739ae039","writable","$97039f73d3457507$export$2e2bcd8739ae039","$9bd79d1c60c99532$export$2e2bcd8739ae039","__destrWrapper","v","$178a5e9aee1d5ea4$export$2e2bcd8739ae039","$bb9a5d09fff8458d$export$2e2bcd8739ae039","key","Object","defineProperty","enumerable","configurable","$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$b7c0c831afc94836$exports","URL","resolve","import","meta","url","toString","$064ef1b00ddfabc9$exports","$aba407a6b3b61408$exports","$33e697626750fbea$exports","$888ff71524f989bf$exports","$ec72f81d1ebf62e9$exports","$af512fe20f3b53d9$exports","$1e6a16da88d577c6$var$SPRITE_SOURCES","still","walking","jumping","ground","$1e6a16da88d577c6$var$SPRITES","$1e6a16da88d577c6$var$canvas","$1e6a16da88d577c6$var$context","$1e6a16da88d577c6$var$loadImage","Promise","reject","image","Image","onerror","onload","src","$1e6a16da88d577c6$var$Direction","$1e6a16da88d577c6$var$scrollPosition","Direction1","$1e6a16da88d577c6$var$Vec2","add","other","this","x","y","mul","factor","abs","Math","constructor","$1e6a16da88d577c6$var$GameObject","topLeft","r","bottomRight","size","center","collidesWith","overlapWith","overlap","Infinity","min","w","h","$1e6a16da88d577c6$var$Platform","paint","context1","col","row","drawImage","super","$1e6a16da88d577c6$var$_walkingAnimationState","WeakMap","$1e6a16da88d577c6$var$_walkingAnimationCounter","$1e6a16da88d577c6$var$Player","update","dt","Left","Right","sign","collision","direction","topDistance","height","translate","bottomDistance","context2","save","scale","wall_left","wall_right","sprite","width","scaledWidth","scaledHeight","dw","restore","jump","jumps","ceiling","$1e6a16da88d577c6$var$player","$1e6a16da88d577c6$var$STATIC_PLATFORMS","$1e6a16da88d577c6$var$seed","$1e6a16da88d577c6$var$rand","$1e6a16da88d577c6$var$platforms","slice","$1e6a16da88d577c6$var$setSeed","it","a","b","c","d","decodeURI","str","h1","h2","h3","h4","k","charCodeAt","imul","$1e6a16da88d577c6$var$cyrb128","t","$1e6a16da88d577c6$var$generatePlatforms","seedElement","document","getElementById","window","location","hash","title","addEventListener","async","sources","promises","sprites","undefined","Array","isArray","push","then","all","$1e6a16da88d577c6$var$loadSprites","console","error","getContext","$1e6a16da88d577c6$var$resizeCanvas","seedInput","event","target","substring","$1e6a16da88d577c6$var$inputSystem","requestAnimationFrame","$1e6a16da88d577c6$var$loop","$1e6a16da88d577c6$var$lastTime","time","clearRect","platform","$1e6a16da88d577c6$var$collisionSystem","forEach","currentScore","floor","$1e6a16da88d577c6$var$score","$1e6a16da88d577c6$var$highscore","localStorage","setItem","textAlign","fillStyle","$1e6a16da88d577c6$var$drawText","$1e6a16da88d577c6$var$displayScore","$1e6a16da88d577c6$var$generatedUntil","reset","round","$1e6a16da88d577c6$var$leftPressed","$1e6a16da88d577c6$var$rightPressed","type","code","text","lines","split","font","fillText","getItem","parentElement","getBoundingClientRect"],"version":3,"file":"index.8ca7fd48.js.map"}