{"mappings":"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","sources":["node_modules/@swc/helpers/src/_class_extract_field_descriptor.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_get.mjs","node_modules/@swc/helpers/src/_class_private_field_get.mjs","node_modules/@swc/helpers/src/_check_private_redeclaration.mjs","node_modules/@swc/helpers/src/_class_private_field_init.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_set.mjs","node_modules/@swc/helpers/src/_class_private_field_set.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_update.mjs","node_modules/@swc/helpers/src/_class_private_field_update.mjs","node_modules/@swc/helpers/src/_define_property.mjs","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-924408dc36aa623d.js","src/index.ts","node_modules/@parcel/runtime-js/lib/runtime-bddcee394878df11.js","node_modules/@parcel/runtime-js/lib/runtime-9452b4e76e12a24a.js","node_modules/@parcel/runtime-js/lib/runtime-48cbacfc90b74de8.js","node_modules/@parcel/runtime-js/lib/runtime-f68f2f544d2e94d1.js","node_modules/@parcel/runtime-js/lib/runtime-4c0d1677e49c8472.js","node_modules/@parcel/runtime-js/lib/runtime-d8dab29d8321fce7.js","node_modules/@parcel/runtime-js/lib/runtime-cd68baa2ae4f961e.js"],"sourcesContent":["export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\n","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorGet from './_class_apply_descriptor_get.mjs';\n\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}\n","export default function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration.mjs\";\n\nexport default function _classPrivateFieldInit(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\n","export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      // This should only throw in strict mode, but class bodies are\n      // always strict and private fields can only be used inside\n      // class bodies.\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorSet from './_class_apply_descriptor_set.mjs';\n\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}\n","export default function _classApplyDescriptorUpdate(receiver, descriptor) {\n    if (descriptor.set) {\n        if (!(\"__destrWrapper\" in descriptor)) {\n            descriptor.__destrWrapper = {\n                set value(v) {\n                    descriptor.set.call(receiver, v);\n                },\n                get value() {\n                    return descriptor.get.call(receiver);\n                },\n            };\n        }\n        return descriptor.__destrWrapper;\n    } else {\n        if (!descriptor.writable) {\n            // This should only throw in strict mode, but class bodies are\n            // always strict and private fields can only be used inside\n            // class bodies.\n            throw new TypeError(\"attempted to set read only private field\");\n        }\n        return descriptor;\n    }\n}\n","import classExtractFieldDescriptor from \"./_class_extract_field_descriptor.mjs\";\nimport classApplyDescriptorUpdate from \"./_class_apply_descriptor_update.mjs\";\n\nexport default function _classPrivateFieldUpdate(receiver, privateMap) {\n    var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"update\");\n    return classApplyDescriptorUpdate(receiver, descriptor);\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"baVEp\\\":\\\"index.02730642.js\\\",\\\"8R9kD\\\":\\\"still.5b1c1644.png\\\",\\\"jCEmS\\\":\\\"walking_1.b14e8473.png\\\",\\\"ap1kH\\\":\\\"walking_2.f3764bc3.png\\\",\\\"czzrC\\\":\\\"walking_3.478d9ba0.png\\\",\\\"iGBlG\\\":\\\"walking_4.f3764bc3.png\\\",\\\"iVkn8\\\":\\\"jumping.05ea4910.png\\\",\\\"9dsWg\\\":\\\"ground.ae3be667.png\\\"}\"));","const DEFAULT_SEED = \"Jixxklääs\";\n\nconst JUMPS = 3;\nconst GRAVITY = -40;\nconst GROUND_FRICTION = 4;\nconst WALK_VELOCITY = 40;\nconst JUMP_VELOCITY = 120;\nconst MAX_FALL_VELOCITY = -120;\n\nconst PLATFORM_TILE_SIZE = 30;\nconst PLATFORM_DISTANCE = 250;\nconst MAX_VIEWPORT_WIDTH = 800;\n\nlet _SHOW_DEBUG_INFO = false;\nconst _FONT_SIZE = 20;\n\ninterface SpriteCollection<T> {\n  still: T;\n  walking: T[];\n  jumping: T;\n  ground: T;\n}\n\nconst SPRITE_SOURCES: SpriteCollection<URL> = {\n  still: new URL(\"sprite/still.png\", import.meta.url),\n  walking: [\n    new URL(\"sprite/walking_1.png\", import.meta.url),\n    new URL(\"sprite/walking_2.png\", import.meta.url),\n    new URL(\"sprite/walking_3.png\", import.meta.url),\n    new URL(\"sprite/walking_4.png\", import.meta.url),\n  ],\n  jumping: new URL(\"sprite/jumping.png\", import.meta.url),\n  ground: new URL(\"sprite/ground.png\", import.meta.url),\n};\nlet SPRITES: SpriteCollection<HTMLImageElement>;\n\nfunction loadImage(url: URL | string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    image.onerror = reject;\n    image.onload = () => resolve(image);\n    image.src = url.toString();\n  });\n}\n\nasync function loadSprites(sources: SpriteCollection<URL>) {\n  // Load all sprites\n  const promises = [];\n  let sprites: SpriteCollection<HTMLImageElement> = {\n    ground: undefined,\n    jumping: undefined,\n    walking: [],\n    still: undefined,\n  };\n  for (const key of Object.keys(sources)) {\n    if (Array.isArray(sources[key])) {\n      for (let i = 0; i < sources[key].length; i++) {\n        promises.push(\n          loadImage(sources[key][i]).then((image) => (sprites[key][i] = image))\n        );\n      }\n    } else {\n      promises.push(\n        loadImage(sources[key]).then((image) => (sprites[key] = image))\n      );\n    }\n  }\n  await Promise.all(promises);\n  return sprites;\n}\n\nlet canvas: HTMLCanvasElement;\nlet context: CanvasRenderingContext2D;\nlet scrollPosition = 0;\n\nenum Direction {\n  Left,\n  Right,\n}\n\ninterface Collision {\n  ground: boolean;\n  ceiling: boolean;\n  wall_left: boolean;\n  wall_right: boolean;\n}\n\nclass Vec2 {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(other: Vec2) {\n    return new Vec2(this.x + other.x, this.y + other.y);\n  }\n\n  mul(factor: number) {\n    return new Vec2(this.x * factor, this.y * factor);\n  }\n\n  abs() {\n    return new Vec2(Math.abs(this.x), Math.abs(this.y));\n  }\n}\n\nclass GameObject {\n  r: Vec2;\n  size: Vec2;\n\n  constructor(x: number, y: number, w: number, h: number) {\n    this.r = new Vec2(x, y);\n    this.size = new Vec2(w, h);\n  }\n\n  get topLeft() {\n    return this.r;\n  }\n\n  get bottomRight() {\n    return this.r.add(this.size);\n  }\n\n  get center() {\n    return this.r.add(this.size.mul(0.5));\n  }\n\n  collidesWith(other: GameObject) {\n    return (\n      this.bottomRight.x >= other.topLeft.x &&\n      this.topLeft.x <= other.bottomRight.x &&\n      this.bottomRight.y >= other.topLeft.y &&\n      this.topLeft.y <= other.bottomRight.y\n    );\n  }\n\n  overlapWith(other: GameObject) {\n    const overlap = new Vec2(Infinity, Infinity);\n\n    if (this.topLeft.x < other.topLeft.x) {\n      overlap.x = this.bottomRight.x - other.topLeft.x;\n    } else if (this.bottomRight.x > other.bottomRight.x) {\n      overlap.x = other.bottomRight.x - this.topLeft.x;\n    }\n    if (this.topLeft.y < other.topLeft.y) {\n      overlap.y = this.bottomRight.y - other.topLeft.y;\n    } else if (this.bottomRight.y > other.bottomRight.y) {\n      overlap.y = other.bottomRight.y - this.topLeft.y;\n    }\n\n    overlap.x = Math.min(overlap.x, this.size.x, other.size.x);\n    overlap.y = Math.min(overlap.y, this.size.y, other.size.y);\n\n    return overlap;\n  }\n}\n\nclass Platform extends GameObject {\n  constructor(x: number, y: number, w: number, h: number) {\n    super(x, y, w, h);\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    for (let col = 0; col < this.size.x / PLATFORM_TILE_SIZE; col++) {\n      for (let row = 0; row < this.size.y / PLATFORM_TILE_SIZE; row++) {\n        context.drawImage(\n          SPRITES.ground,\n          this.r.x + col * PLATFORM_TILE_SIZE,\n          this.r.y + row * PLATFORM_TILE_SIZE,\n          PLATFORM_TILE_SIZE,\n          PLATFORM_TILE_SIZE\n        );\n      }\n    }\n\n    if (_SHOW_DEBUG_INFO) {\n      context.strokeStyle = \"red\";\n      context.strokeRect(this.r.x, this.r.y, this.size.x, this.size.y);\n    }\n  }\n}\n\nclass Player extends GameObject {\n  v = new Vec2(0, 0);\n  collision: Collision = {\n    ground: false,\n    ceiling: false,\n    wall_left: false,\n    wall_right: false,\n  };\n  walking: Direction;\n  direction: Direction;\n  jumps = 0;\n\n  #walkingAnimationState = 0;\n  #walkingAnimationCounter = 0;\n\n  constructor(x: number, y: number, h: number) {\n    const aspectRatio = SPRITES.still.width / SPRITES.still.height;\n    super(x, y, aspectRatio * h, h);\n  }\n\n  update(dt: number) {\n    if (this.walking === Direction.Left) {\n      this.v.x = -WALK_VELOCITY;\n    } else if (this.walking === Direction.Right) {\n      this.v.x = WALK_VELOCITY;\n    }\n\n    // Slow down when on ground\n    const sign = this.v.x > 0 ? 1 : -1;\n    if (this.v.x !== 0 && this.collision.ground && !this.walking) {\n      this.v.x -= sign * GROUND_FRICTION;\n    }\n\n    // Update facing direction\n    if (this.v.x < 0 || this.walking === Direction.Left) {\n      this.direction = Direction.Left;\n    } else if (this.v.x > 0 || this.walking === Direction.Right) {\n      this.direction = Direction.Right;\n    }\n\n    // Apply gravity if not standing on the ground\n    if (!this.collision.ground) {\n      this.v.y += GRAVITY * dt;\n    }\n\n    // Constrain to maximum velocity\n    if (this.v.y < MAX_FALL_VELOCITY) {\n      this.v.y = MAX_FALL_VELOCITY;\n    }\n\n    this.r = this.r.add(this.v.mul(dt));\n\n    const topDistance =\n      this.r.y + this.size.y - scrollPosition - (3 / 5) * canvas.height;\n    if (topDistance > 0) {\n      // Move viewport up\n      scrollPosition += topDistance;\n      context.translate(0, -topDistance);\n    }\n    const bottomDistance = this.r.y - scrollPosition - canvas.height / 5;\n    if (bottomDistance < 0) {\n      // Move viewport down\n      scrollPosition += bottomDistance;\n      context.translate(0, -bottomDistance);\n    }\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    if (_SHOW_DEBUG_INFO) {\n      context.strokeStyle = \"blue\";\n      context.strokeRect(this.r.x, this.r.y, this.size.x, this.size.y);\n    }\n\n    context.save();\n    context.translate(this.center.x, this.center.y);\n    context.scale(this.direction === Direction.Left ? -1 : 1, -1);\n    context.translate(-this.center.x, -this.center.y);\n\n    if (this.collision.ground) {\n      if (\n        this.walking &&\n        !this.collision.wall_left &&\n        !this.collision.wall_right\n      ) {\n        const sprite = SPRITES.walking[this.#walkingAnimationState];\n        context.drawImage(\n          sprite,\n          this.r.x,\n          this.r.y,\n          (sprite.width / SPRITES.still.width) * this.size.x,\n          this.size.y\n        );\n\n        // Advance walking animation\n        this.#walkingAnimationCounter++;\n        this.#walkingAnimationCounter %= 8;\n        if (this.#walkingAnimationCounter === 0) {\n          this.#walkingAnimationState++;\n          this.#walkingAnimationState %= SPRITES.walking.length;\n        }\n      } else {\n        const sprite = SPRITES.still;\n        context.drawImage(sprite, this.r.x, this.r.y, this.size.x, this.size.y);\n      }\n    } else {\n      const sprite = SPRITES.jumping;\n      const scaledWidth = (sprite.width / SPRITES.still.width) * this.size.x;\n      const scaledHeight = (sprite.height / SPRITES.still.height) * this.size.y;\n      const dw = scaledWidth - this.size.x;\n      context.drawImage(\n        sprite,\n        this.r.x - dw / 2,\n        this.r.y,\n        scaledWidth,\n        scaledHeight\n      );\n    }\n\n    context.restore();\n  }\n\n  jump() {\n    if (this.jumps < JUMPS) {\n      this.jumps++;\n      this.v.y = JUMP_VELOCITY;\n    }\n  }\n}\n\nlet player: Player;\nconst STATIC_PLATFORMS = [\n  // ground\n  new Platform(0, 0, MAX_VIEWPORT_WIDTH, PLATFORM_TILE_SIZE),\n];\nlet platforms = STATIC_PLATFORMS.slice();\n\n// See https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript\n// Hash function for strings\nfunction cyrb128(str: string) {\n  let h1 = 1779033703,\n    h2 = 3144134277,\n    h3 = 1013904242,\n    h4 = 2773480762;\n  for (let i = 0, k: number; i < str.length; i++) {\n    k = str.charCodeAt(i);\n    h1 = h2 ^ Math.imul(h1 ^ k, 597399067);\n    h2 = h3 ^ Math.imul(h2 ^ k, 2869860233);\n    h3 = h4 ^ Math.imul(h3 ^ k, 951274213);\n    h4 = h1 ^ Math.imul(h4 ^ k, 2716044179);\n  }\n  h1 = Math.imul(h3 ^ (h1 >>> 18), 597399067);\n  h2 = Math.imul(h4 ^ (h2 >>> 22), 2869860233);\n  h3 = Math.imul(h1 ^ (h3 >>> 17), 951274213);\n  h4 = Math.imul(h2 ^ (h4 >>> 19), 2716044179);\n  return [\n    (h1 ^ h2 ^ h3 ^ h4) >>> 0,\n    (h2 ^ h1) >>> 0,\n    (h3 ^ h1) >>> 0,\n    (h4 ^ h1) >>> 0,\n  ];\n}\n\n// Returns a random number generator for the given seed\nfunction sfc32(a: number, b: number, c: number, d: number) {\n  return function () {\n    a >>>= 0;\n    b >>>= 0;\n    c >>>= 0;\n    d >>>= 0;\n    var t = (a + b) | 0;\n    a = b ^ (b >>> 9);\n    b = (c + (c << 3)) | 0;\n    c = (c << 21) | (c >>> 11);\n    d = (d + 1) | 0;\n    t = (t + d) | 0;\n    c = (c + t) | 0;\n    return (t >>> 0) / 4294967296;\n  };\n}\n\nlet seed: number[], rand: () => number;\nfunction setSeed(it: string) {\n  it = decodeURI(it);\n\n  seed = cyrb128(it);\n  rand = sfc32(seed[0], seed[1], seed[2], seed[3]);\n\n  if (canvas) {\n    generatePlatforms(true);\n  }\n\n  const seedElement: HTMLInputElement = document.getElementById(\n    \"seed\"\n  ) as HTMLInputElement;\n  if (seedElement) {\n    seedElement.value = it;\n  }\n  window.location.hash = `#${it}`;\n  document.title = it;\n}\n\nasync function main() {\n  SPRITES = await loadSprites(SPRITE_SOURCES);\n\n  player = new Player(250, 200, 70);\n\n  canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n  if (!canvas) {\n    console.error(\"failed to get canvas element\");\n    return;\n  }\n  context = canvas.getContext(\"2d\");\n  if (!context) {\n    console.error(\"failed to get canvas context\");\n    return;\n  }\n\n  resizeCanvas();\n\n  const seedInput = document.getElementById(\"seed\");\n  if (!seedInput) {\n    console.error(\"failed to get seed input element\");\n    return;\n  }\n  // Update the seed when the input changes\n  seedInput.addEventListener(\"input\", (event) =>\n    setSeed((event.target as HTMLInputElement).value)\n  );\n  // Update the seed when the url changes\n  window.addEventListener(\"hashchange\", () =>\n    setSeed(window.location.hash.substring(1))\n  );\n  // Load the seed from the url\n  setSeed(window.location.hash.substring(1) || DEFAULT_SEED);\n\n  document.addEventListener(\"keydown\", inputSystem);\n  document.addEventListener(\"keyup\", inputSystem);\n\n  window.requestAnimationFrame(loop);\n}\nwindow.addEventListener(\"load\", main);\n\nlet fpsUpdateCounter = 0;\nlet fps: string;\nlet lastTime = 0;\nfunction loop(time: number) {\n  window.requestAnimationFrame(loop);\n  // Skip first frame\n  if (!time) {\n    return;\n  }\n\n  const dt = (time - lastTime) / 1e2;\n  lastTime = time;\n\n  if (!canvas || !context) {\n    console.error(\"canvas or context are falsy\");\n    return;\n  }\n\n  context.clearRect(0, scrollPosition, canvas.width, canvas.height);\n\n  if (_SHOW_DEBUG_INFO) {\n    // Do not update the fps every frame so it does not flicker\n    if (fpsUpdateCounter === 0) {\n      fps = (10 / dt).toFixed(1);\n    }\n    fpsUpdateCounter++;\n    fpsUpdateCounter %= 10;\n\n    context.fillStyle = \"lightgreen\";\n    context.textAlign = \"right\";\n    drawText(\n      `${fps}\n      ${player.jumps}`,\n      canvas.width - 20,\n      20\n    );\n  }\n\n  player.update(dt);\n\n  collisionSystem();\n\n  player.paint(context);\n  platforms.forEach((platform) => platform.paint(context));\n\n  displayScore();\n\n  generatePlatforms();\n}\n\n// Generates new platforms until there are enough to fill the screen\nlet generatedUntil = 0;\nfunction generatePlatforms(reset = false) {\n  if (reset) {\n    generatedUntil = 0;\n    platforms = STATIC_PLATFORMS.slice();\n  }\n\n  while (generatedUntil - player.r.y < 2 * canvas.height) {\n    const w =\n      Math.round((100 + rand() * 100) / PLATFORM_TILE_SIZE) *\n      PLATFORM_TILE_SIZE;\n    const h = PLATFORM_TILE_SIZE;\n    const x = (canvas.width - w) * rand();\n    const y = generatedUntil + PLATFORM_DISTANCE;\n    generatedUntil = y;\n    platforms.push(new Platform(x, y, w, h));\n  }\n}\n\nlet leftPressed = false;\nlet rightPressed = false;\nfunction inputSystem(event: KeyboardEvent) {\n  if (event.type === \"keydown\") {\n    switch (event.code) {\n      case \"Space\":\n        player.jump();\n        break;\n      case \"KeyA\":\n      case \"ArrowLeft\":\n        leftPressed = true;\n        player.walking = Direction.Left;\n        break;\n      case \"KeyD\":\n      case \"ArrowRight\":\n        rightPressed = true;\n        player.walking = Direction.Right;\n        break;\n    }\n  } else if (event.type === \"keyup\") {\n    switch (event.code) {\n      case \"KeyA\":\n      case \"ArrowLeft\":\n        leftPressed = false;\n        player.walking = !rightPressed ? null : Direction.Right;\n        break;\n      case \"KeyD\":\n      case \"ArrowRight\":\n        rightPressed = false;\n        player.walking = !leftPressed ? null : Direction.Left;\n        break;\n    }\n  }\n}\n\nfunction collisionSystem() {\n  player.collision = {\n    ground: false,\n    ceiling: false,\n    wall_left: false,\n    wall_right: false,\n  };\n  for (const platform of platforms) {\n    if (player.collidesWith(platform)) {\n      const overlap = player.overlapWith(platform).abs();\n      if (overlap.y < overlap.x) {\n        if (player.center.y > platform.center.y) {\n          // Place player's top edge at platform's bottom edge\n          player.r.y = platform.r.y + platform.size.y;\n          player.collision.ground = true;\n        } else {\n          // Place player's bottom edge at platform's top edge\n          player.r.y = platform.r.y - player.size.y;\n          player.collision.ceiling = true;\n        }\n        player.v.y = 0;\n      } else {\n        if (player.center.x > platform.center.x) {\n          // Place player's left edge at platform's right edge\n          player.r.x = platform.r.x + platform.size.x;\n          player.collision.wall_left = true;\n        } else {\n          // Place player's right edge at platform's left edge\n          player.r.x = platform.r.x - player.size.x;\n          player.collision.wall_right = true;\n        }\n        player.v.x = 0;\n      }\n    }\n  }\n\n  // Stop the player at the left or right edge of the screen\n  if (player.r.x <= 0) {\n    player.r.x = 0;\n    player.collision.wall_left = true;\n  } else if (player.r.x + player.size.x >= canvas.width) {\n    player.r.x = canvas.width - player.size.x;\n    player.collision.wall_right = true;\n  }\n}\n\nfunction drawText(text: string, x: number, y: number) {\n  context.save();\n  context.translate(0, canvas.height + scrollPosition);\n  context.scale(1, -1);\n\n  const lines = text.split(\"\\n\");\n  for (let i = 0; i < lines.length; i++) {\n    context.font = `${_FONT_SIZE}px 'Press Start 2P'`;\n    context.fillText(lines[i], x, y + _FONT_SIZE + (_FONT_SIZE + 10) * i);\n  }\n  context.restore();\n}\n\nlet score = 0;\nlet highscore = localStorage.getItem(\"highscore\") || 0;\nfunction displayScore() {\n  const currentScore = Math.floor(player.r.y / PLATFORM_DISTANCE);\n  if (player.collision.ground) {\n    player.jumps = 0;\n    score = currentScore;\n    if (score > highscore) {\n      highscore = score;\n      localStorage.setItem(\"highscore\", highscore.toString());\n    }\n  } else if (currentScore < score) {\n    score = currentScore;\n  }\n\n  context.textAlign = \"left\";\n  context.fillStyle = \"white\";\n  drawText(`Score: ${score}\\nHighscore: ${highscore}`, 20, 20);\n}\n\nfunction resizeCanvas() {\n  if (!canvas) {\n    return;\n  }\n\n  const { width, height } = canvas.parentElement.getBoundingClientRect();\n  canvas.height = height;\n  canvas.width = width;\n\n  // Place coordinate system origin in bottom left corner\n  context.scale(1, -1);\n  context.translate(0, -canvas.height - scrollPosition);\n}\nwindow.addEventListener(\"resize\", resizeCanvas);\n\n// vim: foldmethod=syntax\n","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"8R9kD\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"jCEmS\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"ap1kH\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"czzrC\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"iGBlG\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"iVkn8\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"9dsWg\");"],"names":["$99d26d6ae153323e$export$2e2bcd8739ae039","receiver","privateMap","action","has","TypeError","get","$77325facfa382e54$export$2e2bcd8739ae039","descriptor","call","value","$92121ed38d27acb0$export$2e2bcd8739ae039","$dba1998b20ced464$export$2e2bcd8739ae039","obj","privateCollection","$7efc65a322f137af$export$2e2bcd8739ae039","set","$dac75875e16c3833$export$2e2bcd8739ae039","writable","$9a4dad1b7a0c1382$export$2e2bcd8739ae039","$1aa398f79271969a$export$2e2bcd8739ae039","__destrWrapper","v","$473f4dc91b3d7aef$export$2e2bcd8739ae039","$9139f4380ced0e7c$export$2e2bcd8739ae039","key","Object","defineProperty","enumerable","configurable","$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$2d081a1fa49e40a2$var$PLATFORM_TILE_SIZE","$8a523147bd576895$exports","getBundleURL","resolve","$0e1cd8fa131fb923$exports","$2715c465276b02ca$exports","$a2c9fb4970f06406$exports","$c7499c57d3873d2e$exports","$7348340f52ca5853$exports","$03e3ba746524fbc0$exports","$2d081a1fa49e40a2$var$SPRITE_SOURCES","still","URL","walking","jumping","ground","$2d081a1fa49e40a2$var$SPRITES","$2d081a1fa49e40a2$var$canvas","$2d081a1fa49e40a2$var$context","$2d081a1fa49e40a2$var$loadImage","Promise","reject","image","Image","onerror","onload","src","toString","$2d081a1fa49e40a2$var$Direction","$2d081a1fa49e40a2$var$scrollPosition","Direction1","$2d081a1fa49e40a2$var$Vec2","add","other","this","x","y","mul","factor","abs","Math","constructor","$2d081a1fa49e40a2$var$GameObject","topLeft","r","bottomRight","size","center","collidesWith","overlapWith","overlap","Infinity","min","w","h","$2d081a1fa49e40a2$var$Platform","paint","context1","col","row","drawImage","super","$2d081a1fa49e40a2$var$_walkingAnimationState","WeakMap","$2d081a1fa49e40a2$var$_walkingAnimationCounter","$2d081a1fa49e40a2$var$Player","update","dt","Left","Right","sign","collision","direction","topDistance","height","translate","bottomDistance","context2","save","scale","wall_left","wall_right","sprite","width","scaledWidth","scaledHeight","dw","restore","jump","jumps","ceiling","$2d081a1fa49e40a2$var$player","$2d081a1fa49e40a2$var$STATIC_PLATFORMS","$2d081a1fa49e40a2$var$seed","$2d081a1fa49e40a2$var$rand","$2d081a1fa49e40a2$var$platforms","slice","$2d081a1fa49e40a2$var$setSeed","it","a","b","c","d","decodeURI","str","h1","h2","h3","h4","k","charCodeAt","imul","$2d081a1fa49e40a2$var$cyrb128","t","$2d081a1fa49e40a2$var$generatePlatforms","seedElement","document","getElementById","window","location","hash","title","addEventListener","async","sources","promises","sprites","undefined","Array","isArray","push","then","all","$2d081a1fa49e40a2$var$loadSprites","console","error","getContext","$2d081a1fa49e40a2$var$resizeCanvas","seedInput","event","target","substring","$2d081a1fa49e40a2$var$inputSystem","requestAnimationFrame","$2d081a1fa49e40a2$var$loop","$2d081a1fa49e40a2$var$lastTime","time","clearRect","platform","$2d081a1fa49e40a2$var$collisionSystem","forEach","currentScore","floor","$2d081a1fa49e40a2$var$score","$2d081a1fa49e40a2$var$highscore","localStorage","setItem","textAlign","fillStyle","$2d081a1fa49e40a2$var$drawText","$2d081a1fa49e40a2$var$displayScore","$2d081a1fa49e40a2$var$generatedUntil","reset","round","$2d081a1fa49e40a2$var$leftPressed","$2d081a1fa49e40a2$var$rightPressed","type","code","text","lines","split","font","fillText","getItem","parentElement","getBoundingClientRect"],"version":3,"file":"index.02730642.js.map"}