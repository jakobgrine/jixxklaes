{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-924408dc36aa623d.js","src/vector.ts","src/game_object.ts","node_modules/@parcel/runtime-js/lib/runtime-bddcee394878df11.js","node_modules/@parcel/runtime-js/lib/runtime-9452b4e76e12a24a.js","node_modules/@parcel/runtime-js/lib/runtime-48cbacfc90b74de8.js","node_modules/@parcel/runtime-js/lib/runtime-f68f2f544d2e94d1.js","node_modules/@parcel/runtime-js/lib/runtime-4c0d1677e49c8472.js","node_modules/@parcel/runtime-js/lib/runtime-d8dab29d8321fce7.js","node_modules/@parcel/runtime-js/lib/runtime-cd68baa2ae4f961e.js","src/sprites.ts","src/platform.ts","node_modules/@swc/helpers/src/_class_extract_field_descriptor.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_get.mjs","node_modules/@swc/helpers/src/_class_private_field_get.mjs","node_modules/@swc/helpers/src/_check_private_redeclaration.mjs","node_modules/@swc/helpers/src/_class_private_field_init.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_set.mjs","node_modules/@swc/helpers/src/_class_private_field_set.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_update.mjs","node_modules/@swc/helpers/src/_class_private_field_update.mjs","node_modules/@swc/helpers/src/_define_property.mjs","src/player.ts","src/random.ts","src/index.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"baVEp\\\":\\\"index.485ac188.js\\\",\\\"8R9kD\\\":\\\"still.5b1c1644.png\\\",\\\"jCEmS\\\":\\\"walking_1.b14e8473.png\\\",\\\"ap1kH\\\":\\\"walking_2.f3764bc3.png\\\",\\\"czzrC\\\":\\\"walking_3.478d9ba0.png\\\",\\\"iGBlG\\\":\\\"walking_4.f3764bc3.png\\\",\\\"iVkn8\\\":\\\"jumping.05ea4910.png\\\",\\\"9dsWg\\\":\\\"ground.ae3be667.png\\\"}\"));","export class Vec2 {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(other: Vec2) {\n    return new Vec2(this.x + other.x, this.y + other.y);\n  }\n\n  mul(factor: number) {\n    return new Vec2(this.x * factor, this.y * factor);\n  }\n\n  abs() {\n    return new Vec2(Math.abs(this.x), Math.abs(this.y));\n  }\n}\n","import { Vec2 } from \"./vector\";\n\nexport class GameObject {\n  r: Vec2;\n  size: Vec2;\n\n  constructor(x: number, y: number, w: number, h: number) {\n    this.r = new Vec2(x, y);\n    this.size = new Vec2(w, h);\n  }\n\n  get topLeft() {\n    return this.r;\n  }\n\n  get bottomRight() {\n    return this.r.add(this.size);\n  }\n\n  get center() {\n    return this.r.add(this.size.mul(0.5));\n  }\n\n  collidesWith(other: GameObject) {\n    return (\n      this.bottomRight.x >= other.topLeft.x &&\n      this.topLeft.x <= other.bottomRight.x &&\n      this.bottomRight.y >= other.topLeft.y &&\n      this.topLeft.y <= other.bottomRight.y\n    );\n  }\n\n  overlapWith(other: GameObject) {\n    const overlap = new Vec2(Infinity, Infinity);\n\n    if (this.topLeft.x < other.topLeft.x) {\n      overlap.x = this.bottomRight.x - other.topLeft.x;\n    } else if (this.bottomRight.x > other.bottomRight.x) {\n      overlap.x = other.bottomRight.x - this.topLeft.x;\n    }\n    if (this.topLeft.y < other.topLeft.y) {\n      overlap.y = this.bottomRight.y - other.topLeft.y;\n    } else if (this.bottomRight.y > other.bottomRight.y) {\n      overlap.y = other.bottomRight.y - this.topLeft.y;\n    }\n\n    overlap.x = Math.min(overlap.x, this.size.x, other.size.x);\n    overlap.y = Math.min(overlap.y, this.size.y, other.size.y);\n\n    return overlap;\n  }\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"8R9kD\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"jCEmS\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"ap1kH\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"czzrC\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"iGBlG\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"iVkn8\");","module.exports = require('./helpers/bundle-url').getBundleURL('baVEp') + require('./helpers/bundle-manifest').resolve(\"9dsWg\");","interface SpriteCollection<T> {\n  still: T;\n  walking: T[];\n  jumping: T;\n  ground: T;\n}\n\nconst SPRITE_SOURCES: SpriteCollection<URL> = {\n  still: new URL(\"sprite/still.png\", import.meta.url),\n  walking: [\n    new URL(\"sprite/walking_1.png\", import.meta.url),\n    new URL(\"sprite/walking_2.png\", import.meta.url),\n    new URL(\"sprite/walking_3.png\", import.meta.url),\n    new URL(\"sprite/walking_4.png\", import.meta.url),\n  ],\n  jumping: new URL(\"sprite/jumping.png\", import.meta.url),\n  ground: new URL(\"sprite/ground.png\", import.meta.url),\n};\n\nfunction loadImage(url: URL | string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    image.onerror = reject;\n    image.onload = () => resolve(image);\n    image.src = url.toString();\n  });\n}\n\nasync function injectSpriteSources(sources: SpriteCollection<URL>) {\n  // Load all sprites\n  const promises = [];\n  let sprites: SpriteCollection<HTMLImageElement> = {\n    ground: undefined,\n    jumping: undefined,\n    walking: [],\n    still: undefined,\n  };\n  for (const key of Object.keys(sources)) {\n    if (Array.isArray(sources[key])) {\n      for (let i = 0; i < sources[key].length; i++) {\n        promises.push(\n          loadImage(sources[key][i]).then((image) => (sprites[key][i] = image))\n        );\n      }\n    } else {\n      promises.push(\n        loadImage(sources[key]).then((image) => (sprites[key] = image))\n      );\n    }\n  }\n  await Promise.all(promises);\n  return sprites;\n}\n\nexport let SPRITES: SpriteCollection<HTMLImageElement>;\n\nexport async function loadSprites() {\n  SPRITES = await injectSpriteSources(SPRITE_SOURCES);\n}\n","import { GameObject } from \"./game_object\";\nimport { _SHOW_DEBUG_INFO } from \"./index\";\nimport { SPRITES } from \"./sprites\";\n\nexport const PLATFORM_TILE_SIZE = 30;\n\nexport class Platform extends GameObject {\n  constructor(x: number, y: number, w: number, h: number) {\n    super(x, y, w, h);\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    for (let col = 0; col < this.size.x / PLATFORM_TILE_SIZE; col++) {\n      for (let row = 0; row < this.size.y / PLATFORM_TILE_SIZE; row++) {\n        context.drawImage(\n          SPRITES.ground,\n          this.r.x + col * PLATFORM_TILE_SIZE,\n          this.r.y + row * PLATFORM_TILE_SIZE,\n          PLATFORM_TILE_SIZE,\n          PLATFORM_TILE_SIZE\n        );\n      }\n    }\n\n    if (_SHOW_DEBUG_INFO) {\n      context.strokeStyle = \"red\";\n      context.strokeRect(this.r.x, this.r.y, this.size.x, this.size.y);\n    }\n  }\n}\n","export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\n","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorGet from './_class_apply_descriptor_get.mjs';\n\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}\n","export default function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration.mjs\";\n\nexport default function _classPrivateFieldInit(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\n","export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      // This should only throw in strict mode, but class bodies are\n      // always strict and private fields can only be used inside\n      // class bodies.\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorSet from './_class_apply_descriptor_set.mjs';\n\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}\n","export default function _classApplyDescriptorUpdate(receiver, descriptor) {\n    if (descriptor.set) {\n        if (!(\"__destrWrapper\" in descriptor)) {\n            descriptor.__destrWrapper = {\n                set value(v) {\n                    descriptor.set.call(receiver, v);\n                },\n                get value() {\n                    return descriptor.get.call(receiver);\n                },\n            };\n        }\n        return descriptor.__destrWrapper;\n    } else {\n        if (!descriptor.writable) {\n            // This should only throw in strict mode, but class bodies are\n            // always strict and private fields can only be used inside\n            // class bodies.\n            throw new TypeError(\"attempted to set read only private field\");\n        }\n        return descriptor;\n    }\n}\n","import classExtractFieldDescriptor from \"./_class_extract_field_descriptor.mjs\";\nimport classApplyDescriptorUpdate from \"./_class_apply_descriptor_update.mjs\";\n\nexport default function _classPrivateFieldUpdate(receiver, privateMap) {\n    var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"update\");\n    return classApplyDescriptorUpdate(receiver, descriptor);\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","import { GameObject } from \"./game_object\";\nimport { _SHOW_DEBUG_INFO } from \"./index\";\nimport { SPRITES } from \"./sprites\";\nimport { Vec2 } from \"./vector\";\n\nconst JUMPS = 3;\nconst GRAVITY = -40;\nconst GROUND_FRICTION = 4;\nconst WALK_VELOCITY = 40;\nconst JUMP_VELOCITY = 120;\nconst MAX_FALL_VELOCITY = -120;\n\nexport enum Direction {\n  Left = \"Left\",\n  Right = \"Right\",\n}\n\nexport interface Collision {\n  ground: boolean;\n  ceiling: boolean;\n  wall_left: boolean;\n  wall_right: boolean;\n}\n\nexport class Player extends GameObject {\n  v = new Vec2(0, 0);\n  collision: Collision = {\n    ground: false,\n    ceiling: false,\n    wall_left: false,\n    wall_right: false,\n  };\n  walking: Direction;\n  direction: Direction;\n  jumps = 0;\n\n  #walkingAnimationState = 0;\n  #walkingAnimationCounter = 0;\n\n  constructor(x: number, y: number, h: number) {\n    const aspectRatio = SPRITES.still.width / SPRITES.still.height;\n    super(x, y, aspectRatio * h, h);\n  }\n\n  update(dt: number) {\n    if (this.walking === Direction.Left) {\n      this.v.x = -WALK_VELOCITY;\n    } else if (this.walking === Direction.Right) {\n      this.v.x = WALK_VELOCITY;\n    }\n\n    // Slow down when on ground\n    const sign = this.v.x > 0 ? 1 : -1;\n    if (this.v.x !== 0 && this.collision.ground && !this.walking) {\n      this.v.x -= sign * GROUND_FRICTION;\n    }\n\n    // Update facing direction\n    if (this.v.x < 0 || this.walking === Direction.Left) {\n      this.direction = Direction.Left;\n    } else if (this.v.x > 0 || this.walking === Direction.Right) {\n      this.direction = Direction.Right;\n    }\n\n    // Apply gravity if not standing on the ground\n    if (!this.collision.ground) {\n      this.v.y += GRAVITY * dt;\n    }\n\n    // Constrain to maximum velocity\n    if (this.v.y < MAX_FALL_VELOCITY) {\n      this.v.y = MAX_FALL_VELOCITY;\n    }\n\n    this.r = this.r.add(this.v.mul(dt));\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    if (_SHOW_DEBUG_INFO) {\n      context.strokeStyle = \"blue\";\n      context.strokeRect(this.r.x, this.r.y, this.size.x, this.size.y);\n    }\n\n    context.save();\n    context.translate(this.center.x, this.center.y);\n    context.scale(this.direction === Direction.Left ? -1 : 1, -1);\n    context.translate(-this.center.x, -this.center.y);\n\n    if (this.collision.ground) {\n      if (\n        this.walking &&\n        !this.collision.wall_left &&\n        !this.collision.wall_right\n      ) {\n        const sprite = SPRITES.walking[this.#walkingAnimationState];\n        context.drawImage(\n          sprite,\n          this.r.x,\n          this.r.y,\n          (sprite.width / SPRITES.still.width) * this.size.x,\n          this.size.y\n        );\n\n        // Advance walking animation\n        this.#walkingAnimationCounter++;\n        this.#walkingAnimationCounter %= 8;\n        if (this.#walkingAnimationCounter === 0) {\n          this.#walkingAnimationState++;\n          this.#walkingAnimationState %= SPRITES.walking.length;\n        }\n      } else {\n        const sprite = SPRITES.still;\n        context.drawImage(sprite, this.r.x, this.r.y, this.size.x, this.size.y);\n      }\n    } else {\n      const sprite = SPRITES.jumping;\n      const scaledWidth = (sprite.width / SPRITES.still.width) * this.size.x;\n      const scaledHeight = (sprite.height / SPRITES.still.height) * this.size.y;\n      const dw = scaledWidth - this.size.x;\n      context.drawImage(\n        sprite,\n        this.r.x - dw / 2,\n        this.r.y,\n        scaledWidth,\n        scaledHeight\n      );\n    }\n\n    context.restore();\n  }\n\n  jump() {\n    if (this.jumps < JUMPS) {\n      this.jumps++;\n      this.v.y = JUMP_VELOCITY;\n    }\n  }\n}\n","// See https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript\n// Hash function for strings\nfunction cyrb128(str: string) {\n  let h1 = 1779033703,\n    h2 = 3144134277,\n    h3 = 1013904242,\n    h4 = 2773480762;\n  for (let i = 0, k: number; i < str.length; i++) {\n    k = str.charCodeAt(i);\n    h1 = h2 ^ Math.imul(h1 ^ k, 597399067);\n    h2 = h3 ^ Math.imul(h2 ^ k, 2869860233);\n    h3 = h4 ^ Math.imul(h3 ^ k, 951274213);\n    h4 = h1 ^ Math.imul(h4 ^ k, 2716044179);\n  }\n  h1 = Math.imul(h3 ^ (h1 >>> 18), 597399067);\n  h2 = Math.imul(h4 ^ (h2 >>> 22), 2869860233);\n  h3 = Math.imul(h1 ^ (h3 >>> 17), 951274213);\n  h4 = Math.imul(h2 ^ (h4 >>> 19), 2716044179);\n  return [\n    (h1 ^ h2 ^ h3 ^ h4) >>> 0,\n    (h2 ^ h1) >>> 0,\n    (h3 ^ h1) >>> 0,\n    (h4 ^ h1) >>> 0,\n  ];\n}\n\n// Returns a random number generator for the given seed\nfunction sfc32(a: number, b: number, c: number, d: number) {\n  return function () {\n    a >>>= 0;\n    b >>>= 0;\n    c >>>= 0;\n    d >>>= 0;\n    var t = (a + b) | 0;\n    a = b ^ (b >>> 9);\n    b = (c + (c << 3)) | 0;\n    c = (c << 21) | (c >>> 11);\n    d = (d + 1) | 0;\n    t = (t + d) | 0;\n    c = (c + t) | 0;\n    return (t >>> 0) / 4294967296;\n  };\n}\n\nlet seed: number[];\n\nexport let rand: () => number;\n\nexport function setSeed(it: string) {\n  it = decodeURI(it);\n\n  seed = cyrb128(it);\n  rand = sfc32(seed[0], seed[1], seed[2], seed[3]);\n\n  const seedElement: HTMLInputElement = document.getElementById(\n    \"seed\"\n  ) as HTMLInputElement;\n  if (seedElement) {\n    seedElement.value = it;\n  }\n  window.location.hash = `#${it}`;\n  document.title = it;\n}\n","import { Platform, PLATFORM_TILE_SIZE } from \"./platform\";\nimport { Direction, Player } from \"./player\";\nimport { rand, setSeed } from \"./random\";\nimport { loadSprites } from \"./sprites\";\n\nconst DEFAULT_SEED = \"Jixxklääs\";\n\nconst PLATFORM_DISTANCE = 250;\nconst MAX_VIEWPORT_WIDTH = 800;\n\nexport let _SHOW_DEBUG_INFO = false;\nconst _FONT_SIZE = 20;\n\nlet canvas: HTMLCanvasElement;\nlet context: CanvasRenderingContext2D;\nlet scrollPosition = 0;\n\nlet player: Player;\nconst STATIC_PLATFORMS = [\n  // ground\n  new Platform(0, 0, MAX_VIEWPORT_WIDTH, PLATFORM_TILE_SIZE),\n];\nlet platforms = STATIC_PLATFORMS.slice();\n\nasync function main() {\n  await loadSprites();\n\n  player = new Player(250, 200, 70);\n\n  canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n  if (!canvas) {\n    console.error(\"failed to get canvas element\");\n    return;\n  }\n  context = canvas.getContext(\"2d\");\n  if (!context) {\n    console.error(\"failed to get canvas context\");\n    return;\n  }\n\n  resizeCanvas();\n\n  const seedInput = document.getElementById(\"seed\");\n  if (!seedInput) {\n    console.error(\"failed to get seed input element\");\n    return;\n  }\n  const updateSeed = (it: string) => {\n    setSeed(it);\n\n    if (canvas) {\n      generatePlatforms(true);\n    }\n  };\n  // Update the seed when the input changes\n  seedInput.addEventListener(\"input\", (event) =>\n    updateSeed((event.target as HTMLInputElement).value)\n  );\n  // Update the seed when the url changes\n  window.addEventListener(\"hashchange\", () =>\n    updateSeed(window.location.hash.substring(1))\n  );\n  // Load the seed from the url\n  updateSeed(window.location.hash.substring(1) || DEFAULT_SEED);\n\n  document.addEventListener(\"keydown\", inputSystem);\n  document.addEventListener(\"keyup\", inputSystem);\n\n  window.requestAnimationFrame(loop);\n}\nwindow.addEventListener(\"load\", main);\n\nlet fpsUpdateCounter = 0;\nlet fps: string;\nlet lastTime = -1;\nfunction loop(time: number) {\n  window.requestAnimationFrame(loop);\n  // Skip first frame\n  if (!time) {\n    return;\n  }\n\n  const dt = lastTime === -1 ? 0 : (time - lastTime) / 1e2;\n  lastTime = time;\n\n  if (!canvas || !context) {\n    console.error(\"canvas or context are falsy\");\n    return;\n  }\n\n  context.clearRect(0, scrollPosition, canvas.width, canvas.height);\n\n  if (_SHOW_DEBUG_INFO) {\n    // Do not update the fps every frame so it does not flicker\n    if (fpsUpdateCounter === 0) {\n      fps = (10 / dt).toFixed(1);\n    }\n    fpsUpdateCounter++;\n    fpsUpdateCounter %= 10;\n\n    context.fillStyle = \"lightgreen\";\n    context.textAlign = \"right\";\n    drawText(\n      `${fps}\n      ${player.jumps}`,\n      canvas.width - 20,\n      20\n    );\n  }\n\n  player.update(dt);\n\n  const topDistance =\n    player.r.y + player.size.y - scrollPosition - (3 / 5) * canvas.height;\n  if (topDistance > 0) {\n    // Move viewport up\n    scrollPosition += topDistance;\n    context.translate(0, -topDistance);\n  }\n  const bottomDistance = player.r.y - scrollPosition - canvas.height / 5;\n  if (bottomDistance < 0) {\n    // Move viewport down\n    scrollPosition += bottomDistance;\n    context.translate(0, -bottomDistance);\n  }\n\n  collisionSystem();\n\n  player.paint(context);\n  platforms.forEach((platform) => platform.paint(context));\n\n  displayScore();\n\n  generatePlatforms();\n}\n\n// Generates new platforms until there are enough to fill the screen\nlet generatedUntil = 0;\nfunction generatePlatforms(reset = false) {\n  if (reset) {\n    generatedUntil = 0;\n    platforms = STATIC_PLATFORMS.slice();\n  }\n\n  while (generatedUntil - player.r.y < 2 * canvas.height) {\n    const w =\n      Math.round((100 + rand() * 100) / PLATFORM_TILE_SIZE) *\n      PLATFORM_TILE_SIZE;\n    const h = PLATFORM_TILE_SIZE;\n    const x = (canvas.width - w) * rand();\n    const y = generatedUntil + PLATFORM_DISTANCE;\n    generatedUntil = y;\n    platforms.push(new Platform(x, y, w, h));\n  }\n}\n\nlet leftPressed = false;\nlet rightPressed = false;\nfunction inputSystem(event: KeyboardEvent) {\n  if (event.type === \"keydown\") {\n    switch (event.code) {\n      case \"Space\":\n        player.jump();\n        break;\n      case \"KeyA\":\n      case \"ArrowLeft\":\n        leftPressed = true;\n        player.walking = Direction.Left;\n        break;\n      case \"KeyD\":\n      case \"ArrowRight\":\n        rightPressed = true;\n        player.walking = Direction.Right;\n        break;\n    }\n  } else if (event.type === \"keyup\") {\n    switch (event.code) {\n      case \"KeyA\":\n      case \"ArrowLeft\":\n        leftPressed = false;\n        player.walking = !rightPressed ? null : Direction.Right;\n        break;\n      case \"KeyD\":\n      case \"ArrowRight\":\n        rightPressed = false;\n        player.walking = !leftPressed ? null : Direction.Left;\n        break;\n    }\n  }\n}\n\nfunction collisionSystem() {\n  player.collision = {\n    ground: false,\n    ceiling: false,\n    wall_left: false,\n    wall_right: false,\n  };\n  for (const platform of platforms) {\n    if (player.collidesWith(platform)) {\n      const overlap = player.overlapWith(platform).abs();\n      if (overlap.y < overlap.x) {\n        if (player.center.y > platform.center.y) {\n          // Place player's top edge at platform's bottom edge\n          player.r.y = platform.r.y + platform.size.y;\n          player.collision.ground = true;\n        } else {\n          // Place player's bottom edge at platform's top edge\n          player.r.y = platform.r.y - player.size.y;\n          player.collision.ceiling = true;\n        }\n        player.v.y = 0;\n      } else {\n        if (player.center.x > platform.center.x) {\n          // Place player's left edge at platform's right edge\n          player.r.x = platform.r.x + platform.size.x;\n          player.collision.wall_left = true;\n        } else {\n          // Place player's right edge at platform's left edge\n          player.r.x = platform.r.x - player.size.x;\n          player.collision.wall_right = true;\n        }\n        player.v.x = 0;\n      }\n    }\n  }\n\n  // Stop the player at the left or right edge of the screen\n  if (player.r.x <= 0) {\n    player.r.x = 0;\n    player.collision.wall_left = true;\n  } else if (player.r.x + player.size.x >= canvas.width) {\n    player.r.x = canvas.width - player.size.x;\n    player.collision.wall_right = true;\n  }\n}\n\nfunction drawText(text: string, x: number, y: number) {\n  context.save();\n  context.translate(0, canvas.height + scrollPosition);\n  context.scale(1, -1);\n\n  const lines = text.split(\"\\n\");\n  for (let i = 0; i < lines.length; i++) {\n    context.font = `${_FONT_SIZE}px 'Press Start 2P'`;\n    context.fillText(lines[i], x, y + _FONT_SIZE + (_FONT_SIZE + 10) * i);\n  }\n  context.restore();\n}\n\nlet score = 0;\nlet highscore = localStorage.getItem(\"highscore\") || 0;\nfunction displayScore() {\n  const currentScore = Math.floor(player.r.y / PLATFORM_DISTANCE);\n  if (player.collision.ground) {\n    player.jumps = 0;\n    score = currentScore;\n    if (score > highscore) {\n      highscore = score;\n      localStorage.setItem(\"highscore\", highscore.toString());\n    }\n  } else if (currentScore < score) {\n    score = currentScore;\n  }\n\n  context.textAlign = \"left\";\n  context.fillStyle = \"white\";\n  drawText(`Score: ${score}\\nHighscore: ${highscore}`, 20, 20);\n}\n\nfunction resizeCanvas() {\n  if (!canvas) {\n    return;\n  }\n\n  const { width, height } = canvas.parentElement.getBoundingClientRect();\n  canvas.height = height;\n  canvas.width = width;\n\n  // Place coordinate system origin in bottom left corner\n  context.scale(1, -1);\n  context.translate(0, -canvas.height - scrollPosition);\n}\nwindow.addEventListener(\"resize\", resizeCanvas);\n\n// vim: foldmethod=syntax\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$86545a4af6d6b31e$export$ac4bca90992eed1","add","other","this","x","y","mul","factor","abs","Math","constructor","$fa12e61c30cce640$export$434da80b31429dcb","topLeft","r","bottomRight","size","center","collidesWith","overlapWith","overlap","Infinity","min","w","h","$8a523147bd576895$exports","getBundleURL","resolve","$0e1cd8fa131fb923$exports","$2715c465276b02ca$exports","$a2c9fb4970f06406$exports","$c7499c57d3873d2e$exports","$7348340f52ca5853$exports","$03e3ba746524fbc0$exports","$a6690e747e276af2$var$SPRITE_SOURCES","still","URL","walking","jumping","ground","$a6690e747e276af2$var$loadImage","Promise","reject","image","Image","onerror","onload","src","toString","$a6690e747e276af2$export$7235cbd6d8646a0b","async","$a6690e747e276af2$export$cd054587bb4ae1d2","sources","promises","sprites","undefined","key","Array","isArray","push","then","all","$a6690e747e276af2$var$injectSpriteSources","$80a7f0881fd57e73$export$e03b8d5e7974bbd6","$80a7f0881fd57e73$export$2dffd0b5373a4389","paint","context","col","row","drawImage","$2d081a1fa49e40a2$export$5158d60739dd11c1","strokeStyle","strokeRect","super","$99d26d6ae153323e$export$2e2bcd8739ae039","receiver","privateMap","action","has","TypeError","get","$77325facfa382e54$export$2e2bcd8739ae039","descriptor","call","$92121ed38d27acb0$export$2e2bcd8739ae039","$dba1998b20ced464$export$2e2bcd8739ae039","obj","privateCollection","$7efc65a322f137af$export$2e2bcd8739ae039","set","$dac75875e16c3833$export$2e2bcd8739ae039","writable","$9a4dad1b7a0c1382$export$2e2bcd8739ae039","$1aa398f79271969a$export$2e2bcd8739ae039","__destrWrapper","v","$473f4dc91b3d7aef$export$2e2bcd8739ae039","$9139f4380ced0e7c$export$2e2bcd8739ae039","defineProperty","enumerable","configurable","$ef5360974979337c$export$cacd6541cfeeb6c1","Direction1","$ef5360974979337c$var$_walkingAnimationState","WeakMap","$ef5360974979337c$var$_walkingAnimationCounter","$ef5360974979337c$export$2616165974278734","update","dt","Left","Right","sign","collision","direction","save","translate","scale","wall_left","wall_right","sprite","width","scaledWidth","scaledHeight","height","dw","restore","jump","jumps","ceiling","$d06cb9f01fec5b38$var$seed","$d06cb9f01fec5b38$export$bb0a9c36cf454ea0","$d06cb9f01fec5b38$export$1471ce584de8ada3","it","a","b","c","d","decodeURI","str","h1","h2","h3","h4","k","charCodeAt","imul","$d06cb9f01fec5b38$var$cyrb128","t","seedElement","document","getElementById","window","location","hash","title","$2d081a1fa49e40a2$var$canvas","$2d081a1fa49e40a2$var$context","$2d081a1fa49e40a2$var$player","$2d081a1fa49e40a2$var$scrollPosition","$2d081a1fa49e40a2$var$STATIC_PLATFORMS","$2d081a1fa49e40a2$var$platforms","slice","addEventListener","console","error","getContext","$2d081a1fa49e40a2$var$resizeCanvas","seedInput","updateSeed","$2d081a1fa49e40a2$var$generatePlatforms","event","target","substring","$2d081a1fa49e40a2$var$inputSystem","requestAnimationFrame","$2d081a1fa49e40a2$var$loop","$2d081a1fa49e40a2$var$fps","$2d081a1fa49e40a2$var$fpsUpdateCounter","$2d081a1fa49e40a2$var$lastTime","time","clearRect","toFixed","fillStyle","textAlign","$2d081a1fa49e40a2$var$drawText","topDistance","bottomDistance","platform","$2d081a1fa49e40a2$var$collisionSystem","forEach","currentScore","floor","$2d081a1fa49e40a2$var$score","$2d081a1fa49e40a2$var$highscore","localStorage","setItem","$2d081a1fa49e40a2$var$displayScore","$2d081a1fa49e40a2$var$generatedUntil","reset","round","$2d081a1fa49e40a2$var$leftPressed","$2d081a1fa49e40a2$var$rightPressed","type","code","text","lines","split","font","fillText","getItem","parentElement","getBoundingClientRect"],"version":3,"file":"index.485ac188.js.map"}