function t(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},r=e.parcelRequire9b86;null==r&&((r=function(t){if(t in i)return i[t].exports;if(t in n){var e=n[t];delete n[t];var r={id:t,exports:{}};return i[t]=r,e.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},e.parcelRequire9b86=r),r.register("kyEFX",(function(e,i){var n,r;t(e.exports,"register",(function(){return n}),(function(t){return n=t})),t(e.exports,"resolve",(function(){return r}),(function(t){return r=t}));var s={};n=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)s[e[i]]=t[e[i]]},r=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),r("kyEFX").register(JSON.parse('{"ahxzu":"index.3343fc4a.js","el5my":"still.5b1c1644.png","cT35h":"walking_1.b14e8473.png","2407k":"walking_2.f3764bc3.png","iY52g":"walking_3.478d9ba0.png","kHvmh":"walking_4.f3764bc3.png","cwiu1":"jumping.05ea4910.png","3aTrs":"ground.ae3be667.png"}'));class s{add(t){return new s(this.x+t.x,this.y+t.y)}mul(t){return new s(this.x*t,this.y*t)}abs(){return new s(Math.abs(this.x),Math.abs(this.y))}constructor(t,e){this.x=t,this.y=e}}class o{get topLeft(){return this.r}get bottomRight(){return this.r.add(this.size)}get center(){return this.r.add(this.size.mul(.5))}collidesWith(t){return this.bottomRight.x>=t.topLeft.x&&this.topLeft.x<=t.bottomRight.x&&this.bottomRight.y>=t.topLeft.y&&this.topLeft.y<=t.bottomRight.y}overlapWith(t){const e=new s(1/0,1/0);return this.topLeft.x<t.topLeft.x?e.x=this.bottomRight.x-t.topLeft.x:this.bottomRight.x>t.bottomRight.x&&(e.x=t.bottomRight.x-this.topLeft.x),this.topLeft.y<t.topLeft.y?e.y=this.bottomRight.y-t.topLeft.y:this.bottomRight.y>t.bottomRight.y&&(e.y=t.bottomRight.y-this.topLeft.y),e.x=Math.min(e.x,this.size.x,t.size.x),e.y=Math.min(e.y,this.size.y,t.size.y),e}constructor(t,e,i,n){this.r=new s(t,e),this.size=new s(i,n)}}var l;l=new URL(r("kyEFX").resolve("el5my"),import.meta.url).toString();var a;a=new URL(r("kyEFX").resolve("cT35h"),import.meta.url).toString();var h;h=new URL(r("kyEFX").resolve("2407k"),import.meta.url).toString();var c;c=new URL(r("kyEFX").resolve("iY52g"),import.meta.url).toString();var u;u=new URL(r("kyEFX").resolve("kHvmh"),import.meta.url).toString();var g;g=new URL(r("kyEFX").resolve("cwiu1"),import.meta.url).toString();var d;d=new URL(r("kyEFX").resolve("3aTrs"),import.meta.url).toString();const f={still:new URL(l),walking:[new URL(a),new URL(h),new URL(c),new URL(u)],jumping:new URL(g),ground:new URL(d)};function w(t){return new Promise(((e,i)=>{const n=new Image;n.onerror=i,n.onload=()=>e(n),n.src=t.toString()}))}let y;async function p(){y=await async function(t){const e=[];let i={ground:void 0,jumping:void 0,walking:[],still:void 0};for(const n of Object.keys(t))if(Array.isArray(t[n]))for(let r=0;r<t[n].length;r++)e.push(w(t[n][r]).then((t=>i[n][r]=t)));else e.push(w(t[n]).then((t=>i[n]=t)));return await Promise.all(e),i}(f)}class m extends o{paint(t){for(let e=0;e<this.size.x/30;e++)for(let i=0;i<this.size.y/30;i++)t.drawImage(y.ground,this.r.x+30*e,this.r.y+30*i,30,30);W&&(t.strokeStyle="red",t.strokeRect(this.r.x,this.r.y,this.size.x,this.size.y))}constructor(t,e,i,n){super(t,e,i,n)}}function x(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function v(t,e){return e.get?e.get.call(t):e.value}function R(t,e){return v(t,x(t,e,"get"))}function b(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function k(t,e,i){b(t,e),e.set(t,i)}function L(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}function _(t,e,i){return L(t,x(t,e,"set"),i),i}function E(t,e){if(e.set)return"__destrWrapper"in e||(e.__destrWrapper={set value(i){e.set.call(t,i)},get value(){return e.get.call(t)}}),e.__destrWrapper;if(!e.writable)throw new TypeError("attempted to set read only private field");return e}function z(t,e){return E(t,x(t,e,"update"))}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let A;var F;(F=A||(A={})).Left="Left",F.Right="Right";var H=new WeakMap,j=new WeakMap;class M extends o{update(t){this.walking===A.Left?this.v.x=-40:this.walking===A.Right&&(this.v.x=40);const e=this.v.x>0?1:-1;0!==this.v.x&&this.collision.ground&&!this.walking&&(this.v.x-=4*e),this.v.x<0||this.walking===A.Left?this.direction=A.Left:(this.v.x>0||this.walking===A.Right)&&(this.direction=A.Right),this.collision.ground||(this.v.y+=-40*t),this.v.y<-120&&(this.v.y=-120),this.r=this.r.add(this.v.mul(t))}paint(t){if(W&&(t.strokeStyle="blue",t.strokeRect(this.r.x,this.r.y,this.size.x,this.size.y)),t.save(),t.translate(this.center.x,this.center.y),t.scale(this.direction===A.Left?-1:1,-1),t.translate(-this.center.x,-this.center.y),this.collision.ground)if(!this.walking||this.collision.wall_left||this.collision.wall_right){const e=y.still;t.drawImage(e,this.r.x,this.r.y,this.size.x,this.size.y)}else{const e=y.walking[R(this,H)];t.drawImage(e,this.r.x,this.r.y,e.width/y.still.width*this.size.x,this.size.y),z(this,j).value++,_(this,j,R(this,j)%8),0===R(this,j)&&(z(this,H).value++,_(this,H,R(this,H)%y.walking.length))}else{const e=y.jumping,i=e.width/y.still.width*this.size.x,n=e.height/y.still.height*this.size.y,r=i-this.size.x;t.drawImage(e,this.r.x-r/2,this.r.y,i,n)}t.restore()}jump(){this.jumps<3&&(this.jumps++,this.v.y=120)}constructor(t,e,i){super(t,e,y.still.width/y.still.height*i,i),S(this,"v",new s(0,0)),S(this,"collision",{ground:!1,ceiling:!1,wall_left:!1,wall_right:!1}),S(this,"jumps",0),k(this,H,{writable:!0,value:0}),k(this,j,{writable:!0,value:0})}}let U,T;function I(t){var e,i,n,r;t=decodeURI(t),U=function(t){let e=1779033703,i=3144134277,n=1013904242,r=2773480762;for(let s,o=0;o<t.length;o++)s=t.charCodeAt(o),e=i^Math.imul(e^s,597399067),i=n^Math.imul(i^s,2869860233),n=r^Math.imul(n^s,951274213),r=e^Math.imul(r^s,2716044179);return e=Math.imul(n^e>>>18,597399067),i=Math.imul(r^i>>>22,2869860233),n=Math.imul(e^n>>>17,951274213),r=Math.imul(i^r>>>19,2716044179),[(e^i^n^r)>>>0,(i^e)>>>0,(n^e)>>>0,(r^e)>>>0]}(t),e=U[0],i=U[1],n=U[2],r=U[3],T=function(){var t=(e>>>=0)+(i>>>=0)|0;return e=i^i>>>9,i=(n>>>=0)+(n<<3)|0,n=(n=n<<21|n>>>11)+(t=t+(r=1+(r>>>=0)|0)|0)|0,(t>>>0)/4294967296};const s=document.getElementById("seed");s&&(s.value=t),window.location.hash=`#${t}`,document.title=t}let W=!1;let X,O,C,P=0;const $=[new m(0,0,800,30)];let q=$.slice();window.addEventListener("load",(async function(){if(await p(),C=new M(250,200,70),X=document.getElementById("canvas"),!X)return void console.error("failed to get canvas element");if(O=X.getContext("2d"),!O)return void console.error("failed to get canvas context");it();const t=document.getElementById("seed");if(!t)return void console.error("failed to get seed input element");const e=t=>{I(t),X&&Y(!0)};t.addEventListener("input",(t=>e(t.target.value))),window.addEventListener("hashchange",(()=>e(window.location.hash.substring(1)))),e(window.location.hash.substring(1)||"Jixxklääs"),document.addEventListener("keydown",V),document.addEventListener("keyup",V),window.requestAnimationFrame(N)}));let B,D=0,K=-1;function N(t){if(window.requestAnimationFrame(N),!t)return;const e=-1===K?0:(t-K)/100;if(K=t,!X||!O)return void console.error("canvas or context are falsy");O.clearRect(0,P,X.width,X.height),W&&(0===D&&(B=(10/e).toFixed(1)),D++,D%=10,O.fillStyle="lightgreen",O.textAlign="right",Z(`${B}\n      ${C.jumps}`,X.width-20,20)),C.update(e);const i=C.r.y+C.size.y-P-.6*X.height;i>0&&(P+=i,O.translate(0,-i));const n=C.r.y-P-X.height/5;n<0&&(P+=n,O.translate(0,-n)),function(){C.collision={ground:!1,ceiling:!1,wall_left:!1,wall_right:!1};for(const t of q)if(C.collidesWith(t)){const e=C.overlapWith(t).abs();e.y<e.x?(C.center.y>t.center.y?(C.r.y=t.r.y+t.size.y,C.collision.ground=!0):(C.r.y=t.r.y-C.size.y,C.collision.ceiling=!0),C.v.y=0):(C.center.x>t.center.x?(C.r.x=t.r.x+t.size.x,C.collision.wall_left=!0):(C.r.x=t.r.x-C.size.x,C.collision.wall_right=!0),C.v.x=0)}C.r.x<=0?(C.r.x=0,C.collision.wall_left=!0):C.r.x+C.size.x>=X.width&&(C.r.x=X.width-C.size.x,C.collision.wall_right=!0)}(),C.paint(O),q.forEach((t=>t.paint(O))),function(){const t=Math.floor(C.r.y/250);C.collision.ground?(C.jumps=0,tt=t,tt>et&&(et=tt,localStorage.setItem("highscore",et.toString()))):t<tt&&(tt=t);O.textAlign="left",O.fillStyle="white",Z(`Score: ${tt}\nHighscore: ${et}`,20,20)}(),Y()}let J=0;function Y(t=!1){for(t&&(J=0,q=$.slice());J-C.r.y<2*X.height;){const t=30*Math.round((100+100*T())/30),e=30,i=(X.width-t)*T(),n=J+250;J=n,q.push(new m(i,n,t,e))}}let G=!1,Q=!1;function V(t){if("keydown"===t.type)switch(t.code){case"Space":C.jump();break;case"KeyA":case"ArrowLeft":G=!0,C.walking=A.Left;break;case"KeyD":case"ArrowRight":Q=!0,C.walking=A.Right}else if("keyup"===t.type)switch(t.code){case"KeyA":case"ArrowLeft":G=!1,C.walking=Q?A.Right:null;break;case"KeyD":case"ArrowRight":Q=!1,C.walking=G?A.Left:null}}function Z(t,e,i){O.save(),O.translate(0,X.height+P),O.scale(1,-1);const n=t.split("\n");for(let t=0;t<n.length;t++)O.font="20px 'Press Start 2P'",O.fillText(n[t],e,i+20+30*t);O.restore()}let tt=0,et=localStorage.getItem("highscore")||0;function it(){if(!X)return;const{width:t,height:e}=X.parentElement.getBoundingClientRect();X.height=e,X.width=t,O.scale(1,-1),O.translate(0,-X.height-P)}window.addEventListener("resize",it);
//# sourceMappingURL=index.3343fc4a.js.map
