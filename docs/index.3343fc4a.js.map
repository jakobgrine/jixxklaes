{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-26c1496cefad4176.js","src/vector.ts","src/game_object.ts","node_modules/@parcel/runtime-js/lib/runtime-13cb91c576a2fe43.js","node_modules/@parcel/runtime-js/lib/runtime-4766e80fdc2ac16e.js","node_modules/@parcel/runtime-js/lib/runtime-96dda06808b5e542.js","node_modules/@parcel/runtime-js/lib/runtime-b8d6bfc0559bb096.js","node_modules/@parcel/runtime-js/lib/runtime-d16467b7716461d1.js","node_modules/@parcel/runtime-js/lib/runtime-e5c72e2a3d5ecd17.js","node_modules/@parcel/runtime-js/lib/runtime-38fc600795d25235.js","src/sprites.ts","src/platform.ts","node_modules/@swc/helpers/src/_class_extract_field_descriptor.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_get.mjs","node_modules/@swc/helpers/src/_class_private_field_get.mjs","node_modules/@swc/helpers/src/_check_private_redeclaration.mjs","node_modules/@swc/helpers/src/_class_private_field_init.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_set.mjs","node_modules/@swc/helpers/src/_class_private_field_set.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_update.mjs","node_modules/@swc/helpers/src/_class_private_field_update.mjs","node_modules/@swc/helpers/src/_define_property.mjs","src/player.ts","src/random.ts","src/index.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"ahxzu\\\":\\\"index.3343fc4a.js\\\",\\\"el5my\\\":\\\"still.5b1c1644.png\\\",\\\"cT35h\\\":\\\"walking_1.b14e8473.png\\\",\\\"2407k\\\":\\\"walking_2.f3764bc3.png\\\",\\\"iY52g\\\":\\\"walking_3.478d9ba0.png\\\",\\\"kHvmh\\\":\\\"walking_4.f3764bc3.png\\\",\\\"cwiu1\\\":\\\"jumping.05ea4910.png\\\",\\\"3aTrs\\\":\\\"ground.ae3be667.png\\\"}\"));","export class Vec2 {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(other: Vec2) {\n    return new Vec2(this.x + other.x, this.y + other.y);\n  }\n\n  mul(factor: number) {\n    return new Vec2(this.x * factor, this.y * factor);\n  }\n\n  abs() {\n    return new Vec2(Math.abs(this.x), Math.abs(this.y));\n  }\n}\n","import { Vec2 } from \"./vector\";\n\nexport class GameObject {\n  r: Vec2;\n  size: Vec2;\n\n  constructor(x: number, y: number, w: number, h: number) {\n    this.r = new Vec2(x, y);\n    this.size = new Vec2(w, h);\n  }\n\n  get topLeft() {\n    return this.r;\n  }\n\n  get bottomRight() {\n    return this.r.add(this.size);\n  }\n\n  get center() {\n    return this.r.add(this.size.mul(0.5));\n  }\n\n  collidesWith(other: GameObject) {\n    return (\n      this.bottomRight.x >= other.topLeft.x &&\n      this.topLeft.x <= other.bottomRight.x &&\n      this.bottomRight.y >= other.topLeft.y &&\n      this.topLeft.y <= other.bottomRight.y\n    );\n  }\n\n  overlapWith(other: GameObject) {\n    const overlap = new Vec2(Infinity, Infinity);\n\n    if (this.topLeft.x < other.topLeft.x) {\n      overlap.x = this.bottomRight.x - other.topLeft.x;\n    } else if (this.bottomRight.x > other.bottomRight.x) {\n      overlap.x = other.bottomRight.x - this.topLeft.x;\n    }\n    if (this.topLeft.y < other.topLeft.y) {\n      overlap.y = this.bottomRight.y - other.topLeft.y;\n    } else if (this.bottomRight.y > other.bottomRight.y) {\n      overlap.y = other.bottomRight.y - this.topLeft.y;\n    }\n\n    overlap.x = Math.min(overlap.x, this.size.x, other.size.x);\n    overlap.y = Math.min(overlap.y, this.size.y, other.size.y);\n\n    return overlap;\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"el5my\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"cT35h\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2407k\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"iY52g\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"kHvmh\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"cwiu1\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3aTrs\")).toString();","interface SpriteCollection<T> {\n  still: T;\n  walking: T[];\n  jumping: T;\n  ground: T;\n}\n\nconst SPRITE_SOURCES: SpriteCollection<URL> = {\n  still: new URL(\"sprite/still.png\", import.meta.url),\n  walking: [\n    new URL(\"sprite/walking_1.png\", import.meta.url),\n    new URL(\"sprite/walking_2.png\", import.meta.url),\n    new URL(\"sprite/walking_3.png\", import.meta.url),\n    new URL(\"sprite/walking_4.png\", import.meta.url),\n  ],\n  jumping: new URL(\"sprite/jumping.png\", import.meta.url),\n  ground: new URL(\"sprite/ground.png\", import.meta.url),\n};\n\nfunction loadImage(url: URL | string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    image.onerror = reject;\n    image.onload = () => resolve(image);\n    image.src = url.toString();\n  });\n}\n\nasync function injectSpriteSources(sources: SpriteCollection<URL>) {\n  // Load all sprites\n  const promises = [];\n  let sprites: SpriteCollection<HTMLImageElement> = {\n    ground: undefined,\n    jumping: undefined,\n    walking: [],\n    still: undefined,\n  };\n  for (const key of Object.keys(sources)) {\n    if (Array.isArray(sources[key])) {\n      for (let i = 0; i < sources[key].length; i++) {\n        promises.push(\n          loadImage(sources[key][i]).then((image) => (sprites[key][i] = image))\n        );\n      }\n    } else {\n      promises.push(\n        loadImage(sources[key]).then((image) => (sprites[key] = image))\n      );\n    }\n  }\n  await Promise.all(promises);\n  return sprites;\n}\n\nexport let SPRITES: SpriteCollection<HTMLImageElement>;\n\nexport async function loadSprites() {\n  SPRITES = await injectSpriteSources(SPRITE_SOURCES);\n}\n","import { GameObject } from \"./game_object\";\nimport { _SHOW_DEBUG_INFO } from \"./index\";\nimport { SPRITES } from \"./sprites\";\n\nexport const PLATFORM_TILE_SIZE = 30;\n\nexport class Platform extends GameObject {\n  constructor(x: number, y: number, w: number, h: number) {\n    super(x, y, w, h);\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    for (let col = 0; col < this.size.x / PLATFORM_TILE_SIZE; col++) {\n      for (let row = 0; row < this.size.y / PLATFORM_TILE_SIZE; row++) {\n        context.drawImage(\n          SPRITES.ground,\n          this.r.x + col * PLATFORM_TILE_SIZE,\n          this.r.y + row * PLATFORM_TILE_SIZE,\n          PLATFORM_TILE_SIZE,\n          PLATFORM_TILE_SIZE\n        );\n      }\n    }\n\n    if (_SHOW_DEBUG_INFO) {\n      context.strokeStyle = \"red\";\n      context.strokeRect(this.r.x, this.r.y, this.size.x, this.size.y);\n    }\n  }\n}\n","export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\n","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorGet from './_class_apply_descriptor_get.mjs';\n\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}\n","export default function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration.mjs\";\n\nexport default function _classPrivateFieldInit(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\n","export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      // This should only throw in strict mode, but class bodies are\n      // always strict and private fields can only be used inside\n      // class bodies.\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorSet from './_class_apply_descriptor_set.mjs';\n\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}\n","export default function _classApplyDescriptorUpdate(receiver, descriptor) {\n    if (descriptor.set) {\n        if (!(\"__destrWrapper\" in descriptor)) {\n            descriptor.__destrWrapper = {\n                set value(v) {\n                    descriptor.set.call(receiver, v);\n                },\n                get value() {\n                    return descriptor.get.call(receiver);\n                },\n            };\n        }\n        return descriptor.__destrWrapper;\n    } else {\n        if (!descriptor.writable) {\n            // This should only throw in strict mode, but class bodies are\n            // always strict and private fields can only be used inside\n            // class bodies.\n            throw new TypeError(\"attempted to set read only private field\");\n        }\n        return descriptor;\n    }\n}\n","import classExtractFieldDescriptor from \"./_class_extract_field_descriptor.mjs\";\nimport classApplyDescriptorUpdate from \"./_class_apply_descriptor_update.mjs\";\n\nexport default function _classPrivateFieldUpdate(receiver, privateMap) {\n    var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"update\");\n    return classApplyDescriptorUpdate(receiver, descriptor);\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","import { GameObject } from \"./game_object\";\nimport { _SHOW_DEBUG_INFO } from \"./index\";\nimport { SPRITES } from \"./sprites\";\nimport { Vec2 } from \"./vector\";\n\nconst JUMPS = 3;\nconst GRAVITY = -40;\nconst GROUND_FRICTION = 4;\nconst WALK_VELOCITY = 40;\nconst JUMP_VELOCITY = 120;\nconst MAX_FALL_VELOCITY = -120;\n\nexport enum Direction {\n  Left = \"Left\",\n  Right = \"Right\",\n}\n\nexport interface Collision {\n  ground: boolean;\n  ceiling: boolean;\n  wall_left: boolean;\n  wall_right: boolean;\n}\n\nexport class Player extends GameObject {\n  v = new Vec2(0, 0);\n  collision: Collision = {\n    ground: false,\n    ceiling: false,\n    wall_left: false,\n    wall_right: false,\n  };\n  walking: Direction;\n  direction: Direction;\n  jumps = 0;\n\n  #walkingAnimationState = 0;\n  #walkingAnimationCounter = 0;\n\n  constructor(x: number, y: number, h: number) {\n    const aspectRatio = SPRITES.still.width / SPRITES.still.height;\n    super(x, y, aspectRatio * h, h);\n  }\n\n  update(dt: number) {\n    if (this.walking === Direction.Left) {\n      this.v.x = -WALK_VELOCITY;\n    } else if (this.walking === Direction.Right) {\n      this.v.x = WALK_VELOCITY;\n    }\n\n    // Slow down when on ground\n    const sign = this.v.x > 0 ? 1 : -1;\n    if (this.v.x !== 0 && this.collision.ground && !this.walking) {\n      this.v.x -= sign * GROUND_FRICTION;\n    }\n\n    // Update facing direction\n    if (this.v.x < 0 || this.walking === Direction.Left) {\n      this.direction = Direction.Left;\n    } else if (this.v.x > 0 || this.walking === Direction.Right) {\n      this.direction = Direction.Right;\n    }\n\n    // Apply gravity if not standing on the ground\n    if (!this.collision.ground) {\n      this.v.y += GRAVITY * dt;\n    }\n\n    // Constrain to maximum velocity\n    if (this.v.y < MAX_FALL_VELOCITY) {\n      this.v.y = MAX_FALL_VELOCITY;\n    }\n\n    this.r = this.r.add(this.v.mul(dt));\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    if (_SHOW_DEBUG_INFO) {\n      context.strokeStyle = \"blue\";\n      context.strokeRect(this.r.x, this.r.y, this.size.x, this.size.y);\n    }\n\n    context.save();\n    context.translate(this.center.x, this.center.y);\n    context.scale(this.direction === Direction.Left ? -1 : 1, -1);\n    context.translate(-this.center.x, -this.center.y);\n\n    if (this.collision.ground) {\n      if (\n        this.walking &&\n        !this.collision.wall_left &&\n        !this.collision.wall_right\n      ) {\n        const sprite = SPRITES.walking[this.#walkingAnimationState];\n        context.drawImage(\n          sprite,\n          this.r.x,\n          this.r.y,\n          (sprite.width / SPRITES.still.width) * this.size.x,\n          this.size.y\n        );\n\n        // Advance walking animation\n        this.#walkingAnimationCounter++;\n        this.#walkingAnimationCounter %= 8;\n        if (this.#walkingAnimationCounter === 0) {\n          this.#walkingAnimationState++;\n          this.#walkingAnimationState %= SPRITES.walking.length;\n        }\n      } else {\n        const sprite = SPRITES.still;\n        context.drawImage(sprite, this.r.x, this.r.y, this.size.x, this.size.y);\n      }\n    } else {\n      const sprite = SPRITES.jumping;\n      const scaledWidth = (sprite.width / SPRITES.still.width) * this.size.x;\n      const scaledHeight = (sprite.height / SPRITES.still.height) * this.size.y;\n      const dw = scaledWidth - this.size.x;\n      context.drawImage(\n        sprite,\n        this.r.x - dw / 2,\n        this.r.y,\n        scaledWidth,\n        scaledHeight\n      );\n    }\n\n    context.restore();\n  }\n\n  jump() {\n    if (this.jumps < JUMPS) {\n      this.jumps++;\n      this.v.y = JUMP_VELOCITY;\n    }\n  }\n}\n","// See https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript\n// Hash function for strings\nfunction cyrb128(str: string) {\n  let h1 = 1779033703,\n    h2 = 3144134277,\n    h3 = 1013904242,\n    h4 = 2773480762;\n  for (let i = 0, k: number; i < str.length; i++) {\n    k = str.charCodeAt(i);\n    h1 = h2 ^ Math.imul(h1 ^ k, 597399067);\n    h2 = h3 ^ Math.imul(h2 ^ k, 2869860233);\n    h3 = h4 ^ Math.imul(h3 ^ k, 951274213);\n    h4 = h1 ^ Math.imul(h4 ^ k, 2716044179);\n  }\n  h1 = Math.imul(h3 ^ (h1 >>> 18), 597399067);\n  h2 = Math.imul(h4 ^ (h2 >>> 22), 2869860233);\n  h3 = Math.imul(h1 ^ (h3 >>> 17), 951274213);\n  h4 = Math.imul(h2 ^ (h4 >>> 19), 2716044179);\n  return [\n    (h1 ^ h2 ^ h3 ^ h4) >>> 0,\n    (h2 ^ h1) >>> 0,\n    (h3 ^ h1) >>> 0,\n    (h4 ^ h1) >>> 0,\n  ];\n}\n\n// Returns a random number generator for the given seed\nfunction sfc32(a: number, b: number, c: number, d: number) {\n  return function () {\n    a >>>= 0;\n    b >>>= 0;\n    c >>>= 0;\n    d >>>= 0;\n    var t = (a + b) | 0;\n    a = b ^ (b >>> 9);\n    b = (c + (c << 3)) | 0;\n    c = (c << 21) | (c >>> 11);\n    d = (d + 1) | 0;\n    t = (t + d) | 0;\n    c = (c + t) | 0;\n    return (t >>> 0) / 4294967296;\n  };\n}\n\nlet seed: number[];\n\nexport let rand: () => number;\n\nexport function setSeed(it: string) {\n  it = decodeURI(it);\n\n  seed = cyrb128(it);\n  rand = sfc32(seed[0], seed[1], seed[2], seed[3]);\n\n  const seedElement: HTMLInputElement = document.getElementById(\n    \"seed\"\n  ) as HTMLInputElement;\n  if (seedElement) {\n    seedElement.value = it;\n  }\n  window.location.hash = `#${it}`;\n  document.title = it;\n}\n","import { Platform, PLATFORM_TILE_SIZE } from \"./platform\";\nimport { Direction, Player } from \"./player\";\nimport { rand, setSeed } from \"./random\";\nimport { loadSprites } from \"./sprites\";\n\nconst DEFAULT_SEED = \"Jixxklääs\";\n\nconst PLATFORM_DISTANCE = 250;\nconst MAX_VIEWPORT_WIDTH = 800;\n\nexport let _SHOW_DEBUG_INFO = false;\nconst _FONT_SIZE = 20;\n\nlet canvas: HTMLCanvasElement;\nlet context: CanvasRenderingContext2D;\nlet scrollPosition = 0;\n\nlet player: Player;\nconst STATIC_PLATFORMS = [\n  // ground\n  new Platform(0, 0, MAX_VIEWPORT_WIDTH, PLATFORM_TILE_SIZE),\n];\nlet platforms = STATIC_PLATFORMS.slice();\n\nasync function main() {\n  await loadSprites();\n\n  player = new Player(250, 200, 70);\n\n  canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n  if (!canvas) {\n    console.error(\"failed to get canvas element\");\n    return;\n  }\n  context = canvas.getContext(\"2d\");\n  if (!context) {\n    console.error(\"failed to get canvas context\");\n    return;\n  }\n\n  resizeCanvas();\n\n  const seedInput = document.getElementById(\"seed\");\n  if (!seedInput) {\n    console.error(\"failed to get seed input element\");\n    return;\n  }\n  const updateSeed = (it: string) => {\n    setSeed(it);\n\n    if (canvas) {\n      generatePlatforms(true);\n    }\n  };\n  // Update the seed when the input changes\n  seedInput.addEventListener(\"input\", (event) =>\n    updateSeed((event.target as HTMLInputElement).value)\n  );\n  // Update the seed when the url changes\n  window.addEventListener(\"hashchange\", () =>\n    updateSeed(window.location.hash.substring(1))\n  );\n  // Load the seed from the url\n  updateSeed(window.location.hash.substring(1) || DEFAULT_SEED);\n\n  document.addEventListener(\"keydown\", inputSystem);\n  document.addEventListener(\"keyup\", inputSystem);\n\n  window.requestAnimationFrame(loop);\n}\nwindow.addEventListener(\"load\", main);\n\nlet fpsUpdateCounter = 0;\nlet fps: string;\nlet lastTime = -1;\nfunction loop(time: number) {\n  window.requestAnimationFrame(loop);\n  // Skip first frame\n  if (!time) {\n    return;\n  }\n\n  const dt = lastTime === -1 ? 0 : (time - lastTime) / 1e2;\n  lastTime = time;\n\n  if (!canvas || !context) {\n    console.error(\"canvas or context are falsy\");\n    return;\n  }\n\n  context.clearRect(0, scrollPosition, canvas.width, canvas.height);\n\n  if (_SHOW_DEBUG_INFO) {\n    // Do not update the fps every frame so it does not flicker\n    if (fpsUpdateCounter === 0) {\n      fps = (10 / dt).toFixed(1);\n    }\n    fpsUpdateCounter++;\n    fpsUpdateCounter %= 10;\n\n    context.fillStyle = \"lightgreen\";\n    context.textAlign = \"right\";\n    drawText(\n      `${fps}\n      ${player.jumps}`,\n      canvas.width - 20,\n      20\n    );\n  }\n\n  player.update(dt);\n\n  const topDistance =\n    player.r.y + player.size.y - scrollPosition - (3 / 5) * canvas.height;\n  if (topDistance > 0) {\n    // Move viewport up\n    scrollPosition += topDistance;\n    context.translate(0, -topDistance);\n  }\n  const bottomDistance = player.r.y - scrollPosition - canvas.height / 5;\n  if (bottomDistance < 0) {\n    // Move viewport down\n    scrollPosition += bottomDistance;\n    context.translate(0, -bottomDistance);\n  }\n\n  collisionSystem();\n\n  player.paint(context);\n  platforms.forEach((platform) => platform.paint(context));\n\n  displayScore();\n\n  generatePlatforms();\n}\n\n// Generates new platforms until there are enough to fill the screen\nlet generatedUntil = 0;\nfunction generatePlatforms(reset = false) {\n  if (reset) {\n    generatedUntil = 0;\n    platforms = STATIC_PLATFORMS.slice();\n  }\n\n  while (generatedUntil - player.r.y < 2 * canvas.height) {\n    const w =\n      Math.round((100 + rand() * 100) / PLATFORM_TILE_SIZE) *\n      PLATFORM_TILE_SIZE;\n    const h = PLATFORM_TILE_SIZE;\n    const x = (canvas.width - w) * rand();\n    const y = generatedUntil + PLATFORM_DISTANCE;\n    generatedUntil = y;\n    platforms.push(new Platform(x, y, w, h));\n  }\n}\n\nlet leftPressed = false;\nlet rightPressed = false;\nfunction inputSystem(event: KeyboardEvent) {\n  if (event.type === \"keydown\") {\n    switch (event.code) {\n      case \"Space\":\n        player.jump();\n        break;\n      case \"KeyA\":\n      case \"ArrowLeft\":\n        leftPressed = true;\n        player.walking = Direction.Left;\n        break;\n      case \"KeyD\":\n      case \"ArrowRight\":\n        rightPressed = true;\n        player.walking = Direction.Right;\n        break;\n    }\n  } else if (event.type === \"keyup\") {\n    switch (event.code) {\n      case \"KeyA\":\n      case \"ArrowLeft\":\n        leftPressed = false;\n        player.walking = !rightPressed ? null : Direction.Right;\n        break;\n      case \"KeyD\":\n      case \"ArrowRight\":\n        rightPressed = false;\n        player.walking = !leftPressed ? null : Direction.Left;\n        break;\n    }\n  }\n}\n\nfunction collisionSystem() {\n  player.collision = {\n    ground: false,\n    ceiling: false,\n    wall_left: false,\n    wall_right: false,\n  };\n  for (const platform of platforms) {\n    if (player.collidesWith(platform)) {\n      const overlap = player.overlapWith(platform).abs();\n      if (overlap.y < overlap.x) {\n        if (player.center.y > platform.center.y) {\n          // Place player's top edge at platform's bottom edge\n          player.r.y = platform.r.y + platform.size.y;\n          player.collision.ground = true;\n        } else {\n          // Place player's bottom edge at platform's top edge\n          player.r.y = platform.r.y - player.size.y;\n          player.collision.ceiling = true;\n        }\n        player.v.y = 0;\n      } else {\n        if (player.center.x > platform.center.x) {\n          // Place player's left edge at platform's right edge\n          player.r.x = platform.r.x + platform.size.x;\n          player.collision.wall_left = true;\n        } else {\n          // Place player's right edge at platform's left edge\n          player.r.x = platform.r.x - player.size.x;\n          player.collision.wall_right = true;\n        }\n        player.v.x = 0;\n      }\n    }\n  }\n\n  // Stop the player at the left or right edge of the screen\n  if (player.r.x <= 0) {\n    player.r.x = 0;\n    player.collision.wall_left = true;\n  } else if (player.r.x + player.size.x >= canvas.width) {\n    player.r.x = canvas.width - player.size.x;\n    player.collision.wall_right = true;\n  }\n}\n\nfunction drawText(text: string, x: number, y: number) {\n  context.save();\n  context.translate(0, canvas.height + scrollPosition);\n  context.scale(1, -1);\n\n  const lines = text.split(\"\\n\");\n  for (let i = 0; i < lines.length; i++) {\n    context.font = `${_FONT_SIZE}px 'Press Start 2P'`;\n    context.fillText(lines[i], x, y + _FONT_SIZE + (_FONT_SIZE + 10) * i);\n  }\n  context.restore();\n}\n\nlet score = 0;\nlet highscore = localStorage.getItem(\"highscore\") || 0;\nfunction displayScore() {\n  const currentScore = Math.floor(player.r.y / PLATFORM_DISTANCE);\n  if (player.collision.ground) {\n    player.jumps = 0;\n    score = currentScore;\n    if (score > highscore) {\n      highscore = score;\n      localStorage.setItem(\"highscore\", highscore.toString());\n    }\n  } else if (currentScore < score) {\n    score = currentScore;\n  }\n\n  context.textAlign = \"left\";\n  context.fillStyle = \"white\";\n  drawText(`Score: ${score}\\nHighscore: ${highscore}`, 20, 20);\n}\n\nfunction resizeCanvas() {\n  if (!canvas) {\n    return;\n  }\n\n  const { width, height } = canvas.parentElement.getBoundingClientRect();\n  canvas.height = height;\n  canvas.width = width;\n\n  // Place coordinate system origin in bottom left corner\n  context.scale(1, -1);\n  context.translate(0, -canvas.height - scrollPosition);\n}\nwindow.addEventListener(\"resize\", resizeCanvas);\n\n// vim: foldmethod=syntax\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$b55acd7b24fdd736$export$ac4bca90992eed1","add","other","this","x","y","mul","factor","abs","Math","constructor","$7e3810f0ef4105c1$export$434da80b31429dcb","topLeft","r","bottomRight","size","center","collidesWith","overlapWith","overlap","Infinity","min","w","h","$b7c0c831afc94836$exports","URL","resolve","import","meta","url","toString","$064ef1b00ddfabc9$exports","$aba407a6b3b61408$exports","$33e697626750fbea$exports","$888ff71524f989bf$exports","$ec72f81d1ebf62e9$exports","$af512fe20f3b53d9$exports","$213d0a54ec41828c$var$SPRITE_SOURCES","still","walking","jumping","ground","$213d0a54ec41828c$var$loadImage","Promise","reject","image","Image","onerror","onload","src","$213d0a54ec41828c$export$7235cbd6d8646a0b","async","$213d0a54ec41828c$export$cd054587bb4ae1d2","sources","promises","sprites","undefined","key","Array","isArray","push","then","all","$213d0a54ec41828c$var$injectSpriteSources","$cb660a06c5607152$export$2dffd0b5373a4389","paint","context","col","row","drawImage","$1e6a16da88d577c6$export$5158d60739dd11c1","strokeStyle","strokeRect","super","$63a2a9cb56255ced$export$2e2bcd8739ae039","receiver","privateMap","action","has","TypeError","get","$91f06d233fb295cb$export$2e2bcd8739ae039","descriptor","call","value","$cfafd7bd727718cb$export$2e2bcd8739ae039","$3b30310a11d769ec$export$2e2bcd8739ae039","obj","privateCollection","$a33675d45e16a910$export$2e2bcd8739ae039","set","$613067712a285d8d$export$2e2bcd8739ae039","writable","$97039f73d3457507$export$2e2bcd8739ae039","$9bd79d1c60c99532$export$2e2bcd8739ae039","__destrWrapper","v","$178a5e9aee1d5ea4$export$2e2bcd8739ae039","$bb9a5d09fff8458d$export$2e2bcd8739ae039","defineProperty","enumerable","configurable","$4e6e03d4aed9dcb6$export$cacd6541cfeeb6c1","Direction1","$4e6e03d4aed9dcb6$var$_walkingAnimationState","WeakMap","$4e6e03d4aed9dcb6$var$_walkingAnimationCounter","$4e6e03d4aed9dcb6$export$2616165974278734","update","dt","Left","Right","sign","collision","direction","save","translate","scale","wall_left","wall_right","sprite","width","scaledWidth","scaledHeight","height","dw","restore","jump","jumps","ceiling","$e7860d74a37e0add$var$seed","$e7860d74a37e0add$export$bb0a9c36cf454ea0","$e7860d74a37e0add$export$1471ce584de8ada3","it","a","b","c","d","decodeURI","str","h1","h2","h3","h4","k","charCodeAt","imul","$e7860d74a37e0add$var$cyrb128","t","seedElement","document","getElementById","window","location","hash","title","$1e6a16da88d577c6$var$canvas","$1e6a16da88d577c6$var$context","$1e6a16da88d577c6$var$player","$1e6a16da88d577c6$var$scrollPosition","$1e6a16da88d577c6$var$STATIC_PLATFORMS","$1e6a16da88d577c6$var$platforms","slice","addEventListener","console","error","getContext","$1e6a16da88d577c6$var$resizeCanvas","seedInput","updateSeed","$1e6a16da88d577c6$var$generatePlatforms","event","target","substring","$1e6a16da88d577c6$var$inputSystem","requestAnimationFrame","$1e6a16da88d577c6$var$loop","$1e6a16da88d577c6$var$fps","$1e6a16da88d577c6$var$fpsUpdateCounter","$1e6a16da88d577c6$var$lastTime","time","clearRect","toFixed","fillStyle","textAlign","$1e6a16da88d577c6$var$drawText","topDistance","bottomDistance","platform","$1e6a16da88d577c6$var$collisionSystem","forEach","currentScore","floor","$1e6a16da88d577c6$var$score","$1e6a16da88d577c6$var$highscore","localStorage","setItem","$1e6a16da88d577c6$var$displayScore","$1e6a16da88d577c6$var$generatedUntil","reset","round","$1e6a16da88d577c6$var$leftPressed","$1e6a16da88d577c6$var$rightPressed","type","code","text","lines","split","font","fillText","getItem","parentElement","getBoundingClientRect"],"version":3,"file":"index.3343fc4a.js.map"}