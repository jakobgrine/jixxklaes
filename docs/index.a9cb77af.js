!function(){function t(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},r=e.parcelRequire9b86;function s(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function o(t,e){return e.get?e.get.call(t):e.value}function l(t,e){return o(t,s(t,e,"get"))}function a(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(t,e,i){a(t,e),e.set(t,i)}function c(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}function u(t,e,i){return c(t,s(t,e,"set"),i),i}function d(t,e){if(e.set)return"__destrWrapper"in e||(e.__destrWrapper={set value(i){e.set.call(t,i)},get value(){return e.get.call(t)}}),e.__destrWrapper;if(!e.writable)throw new TypeError("attempted to set read only private field");return e}function g(t,e){return d(t,s(t,e,"update"))}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}null==r&&((r=function(t){if(t in i)return i[t].exports;if(t in n){var e=n[t];delete n[t];var r={id:t,exports:{}};return i[t]=r,e.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},e.parcelRequire9b86=r),r.register("iE7OH",(function(e,i){var n,r;t(e.exports,"register",(function(){return n}),(function(t){return n=t})),t(e.exports,"resolve",(function(){return r}),(function(t){return r=t}));var s={};n=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)s[e[i]]=t[e[i]]},r=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),r.register("aNJCr",(function(e,i){var n;t(e.exports,"getBundleURL",(function(){return n}),(function(t){return n=t}));var r={};function s(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(t){var e=r[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(t)return s(t[2])}return"/"}(),r[t]=e),e}})),r("iE7OH").register(JSON.parse('{"baVEp":"index.a9cb77af.js","8R9kD":"still.5b1c1644.png","jCEmS":"walking_1.b14e8473.png","ap1kH":"walking_2.f3764bc3.png","czzrC":"walking_3.478d9ba0.png","iGBlG":"walking_4.f3764bc3.png","iVkn8":"jumping.05ea4910.png","9dsWg":"ground.ae3be667.png"}'));const w=30;var p;p=r("aNJCr").getBundleURL("baVEp")+r("iE7OH").resolve("8R9kD");var y;y=r("aNJCr").getBundleURL("baVEp")+r("iE7OH").resolve("jCEmS");var v;v=r("aNJCr").getBundleURL("baVEp")+r("iE7OH").resolve("ap1kH");var x;x=r("aNJCr").getBundleURL("baVEp")+r("iE7OH").resolve("czzrC");var m;m=r("aNJCr").getBundleURL("baVEp")+r("iE7OH").resolve("iGBlG");var b;b=r("aNJCr").getBundleURL("baVEp")+r("iE7OH").resolve("iVkn8");var R;R=r("aNJCr").getBundleURL("baVEp")+r("iE7OH").resolve("9dsWg");const E={still:new URL(p),walking:[new URL(y),new URL(v),new URL(x),new URL(m)],jumping:new URL(b),ground:new URL(R)};let L,_,k;function z(t){return new Promise(((e,i)=>{const n=new Image;n.onerror=i,n.onload=()=>e(n),n.src=t.toString()}))}let H,A=0;var S;(S=H||(H={})).Left="Left",S.Right="Right";class j{add(t){return new j(this.x+t.x,this.y+t.y)}mul(t){return new j(this.x*t,this.y*t)}abs(){return new j(Math.abs(this.x),Math.abs(this.y))}constructor(t,e){this.x=t,this.y=e}}class C{get topLeft(){return this.r}get bottomRight(){return this.r.add(this.size)}get center(){return this.r.add(this.size.mul(.5))}collidesWith(t){return this.bottomRight.x>=t.topLeft.x&&this.topLeft.x<=t.bottomRight.x&&this.bottomRight.y>=t.topLeft.y&&this.topLeft.y<=t.bottomRight.y}overlapWith(t){const e=new j(1/0,1/0);return this.topLeft.x<t.topLeft.x?e.x=this.bottomRight.x-t.topLeft.x:this.bottomRight.x>t.bottomRight.x&&(e.x=t.bottomRight.x-this.topLeft.x),this.topLeft.y<t.topLeft.y?e.y=this.bottomRight.y-t.topLeft.y:this.bottomRight.y>t.bottomRight.y&&(e.y=t.bottomRight.y-this.topLeft.y),e.x=Math.min(e.x,this.size.x,t.size.x),e.y=Math.min(e.y,this.size.y,t.size.y),e}constructor(t,e,i,n){this.r=new j(t,e),this.size=new j(i,n)}}class U extends C{paint(t){for(let e=0;e<this.size.x/w;e++)for(let i=0;i<this.size.y/w;i++)t.drawImage(L.ground,this.r.x+e*w,this.r.y+i*w,w,w)}constructor(t,e,i,n){super(t,e,i,n)}}var M=new WeakMap,O=new WeakMap;class B extends C{update(t){this.walking===H.Left?this.v.x=-40:this.walking===H.Right&&(this.v.x=40);const e=this.v.x>0?1:-1;0!==this.v.x&&this.collision.ground&&!this.walking&&(this.v.x-=4*e),this.v.x<0||this.walking===H.Left?this.direction=H.Left:(this.v.x>0||this.walking===H.Right)&&(this.direction=H.Right),this.collision.ground||(this.v.y+=-40*t),this.v.y<-120&&(this.v.y=-120),this.r=this.r.add(this.v.mul(t));const i=this.r.y+this.size.y-A-.6*_.height;i>0&&(A+=i,k.translate(0,-i));const n=this.r.y-A-_.height/5;n<0&&(A+=n,k.translate(0,-n))}paint(t){if(t.save(),t.translate(this.center.x,this.center.y),t.scale(this.direction===H.Left?-1:1,-1),t.translate(-this.center.x,-this.center.y),this.collision.ground)if(!this.walking||this.collision.wall_left||this.collision.wall_right){const e=L.still;t.drawImage(e,this.r.x,this.r.y,this.size.x,this.size.y)}else{const e=L.walking[l(this,M)];t.drawImage(e,this.r.x,this.r.y,e.width/L.still.width*this.size.x,this.size.y),g(this,O).value++,u(this,O,l(this,O)%8),0===l(this,O)&&(g(this,M).value++,u(this,M,l(this,M)%L.walking.length))}else{const e=L.jumping,i=e.width/L.still.width*this.size.x,n=e.height/L.still.height*this.size.y,r=i-this.size.x;t.drawImage(e,this.r.x-r/2,this.r.y,i,n)}t.restore()}jump(){this.jumps<3&&(this.jumps++,this.v.y=120)}constructor(t,e,i){super(t,e,L.still.width/L.still.height*i,i),f(this,"v",new j(0,0)),f(this,"collision",{ground:!1,ceiling:!1,wall_left:!1,wall_right:!1}),f(this,"jumps",0),h(this,M,{writable:!0,value:0}),h(this,O,{writable:!0,value:0})}}let F;const I=[new U(0,0,800,w)];let N,W,J=I.slice();function V(t){var e,i,n,r;t=decodeURI(t),N=function(t){let e=1779033703,i=3144134277,n=1013904242,r=2773480762;for(let s,o=0;o<t.length;o++)s=t.charCodeAt(o),e=i^Math.imul(e^s,597399067),i=n^Math.imul(i^s,2869860233),n=r^Math.imul(n^s,951274213),r=e^Math.imul(r^s,2716044179);return e=Math.imul(n^e>>>18,597399067),i=Math.imul(r^i>>>22,2869860233),n=Math.imul(e^n>>>17,951274213),r=Math.imul(i^r>>>19,2716044179),[(e^i^n^r)>>>0,(i^e)>>>0,(n^e)>>>0,(r^e)>>>0]}(t),e=N[0],i=N[1],n=N[2],r=N[3],W=function(){var t=(e>>>=0)+(i>>>=0)|0;return e=i^i>>>9,i=(n>>>=0)+(n<<3)|0,n=(n=n<<21|n>>>11)+(t=t+(r=1+(r>>>=0)|0)|0)|0,(t>>>0)/4294967296},_&&$(!0);const s=document.getElementById("seed");s&&(s.value=t),window.location.hash=`#${t}`,document.title=t}window.addEventListener("load",(async function(){if(L=await async function(t){const e=[];let i={ground:void 0,jumping:void 0,walking:[],still:void 0};for(const n of Object.keys(t))if(Array.isArray(t[n]))for(let r=0;r<t[n].length;r++)e.push(z(t[n][r]).then((t=>i[n][r]=t)));else e.push(z(t[n]).then((t=>i[n]=t)));return await Promise.all(e),i}(E),F=new B(250,200,70),_=document.getElementById("canvas"),!_)return void console.error("failed to get canvas element");if(k=_.getContext("2d"),!k)return void console.error("failed to get canvas context");Z();const t=document.getElementById("seed");t?(t.addEventListener("input",(t=>V(t.target.value))),window.addEventListener("hashchange",(()=>V(window.location.hash.substring(1)))),V(window.location.hash.substring(1)||"Jixxklääs"),document.addEventListener("keydown",K),document.addEventListener("keyup",K),window.requestAnimationFrame(D)):console.error("failed to get seed input element")}));let T=-1;function D(t){if(window.requestAnimationFrame(D),!t)return;const e=-1===T?0:(t-T)/100;T=t,_&&k?(k.clearRect(0,A,_.width,_.height),F.update(e),function(){F.collision={ground:!1,ceiling:!1,wall_left:!1,wall_right:!1};for(const t of J)if(F.collidesWith(t)){const e=F.overlapWith(t).abs();e.y<e.x?(F.center.y>t.center.y?(F.r.y=t.r.y+t.size.y,F.collision.ground=!0):(F.r.y=t.r.y-F.size.y,F.collision.ceiling=!0),F.v.y=0):(F.center.x>t.center.x?(F.r.x=t.r.x+t.size.x,F.collision.wall_left=!0):(F.r.x=t.r.x-F.size.x,F.collision.wall_right=!0),F.v.x=0)}F.r.x<=0?(F.r.x=0,F.collision.wall_left=!0):F.r.x+F.size.x>=_.width&&(F.r.x=_.width-F.size.x,F.collision.wall_right=!0)}(),F.paint(k),J.forEach((t=>t.paint(k))),function(){const t=Math.floor(F.r.y/250);F.collision.ground?(F.jumps=0,X=t,X>Y&&(Y=X,localStorage.setItem("highscore",Y.toString()))):t<X&&(X=t);k.textAlign="left",k.fillStyle="white",Q(`Score: ${X}\nHighscore: ${Y}`,20,20)}(),$()):console.error("canvas or context are falsy")}let P=0;function $(t=!1){for(t&&(P=0,J=I.slice());P-F.r.y<2*_.height;){const t=Math.round((100+100*W())/w)*w,e=w,i=(_.width-t)*W(),n=P+250;P=n,J.push(new U(i,n,t,e))}}let q=!1,G=!1;function K(t){if("keydown"===t.type)switch(t.code){case"Space":F.jump();break;case"KeyA":case"ArrowLeft":q=!0,F.walking=H.Left;break;case"KeyD":case"ArrowRight":G=!0,F.walking=H.Right}else if("keyup"===t.type)switch(t.code){case"KeyA":case"ArrowLeft":q=!1,F.walking=G?H.Right:null;break;case"KeyD":case"ArrowRight":G=!1,F.walking=q?H.Left:null}}function Q(t,e,i){k.save(),k.translate(0,_.height+A),k.scale(1,-1);const n=t.split("\n");for(let t=0;t<n.length;t++)k.font="20px 'Press Start 2P'",k.fillText(n[t],e,i+20+30*t);k.restore()}let X=0,Y=localStorage.getItem("highscore")||0;function Z(){if(!_)return;const{width:t,height:e}=_.parentElement.getBoundingClientRect();_.height=e,_.width=t,k.scale(1,-1),k.translate(0,-_.height-A)}window.addEventListener("resize",Z)}();
//# sourceMappingURL=index.a9cb77af.js.map
